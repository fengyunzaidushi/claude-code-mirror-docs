<!-- Generated by SpecStory -->

<!-- cursor Session a7e79d87-b3e4-49ee-a0de-5f05f6e21347 (2025-10-15 10:13Z) -->

# ä½¿ç”¨sub-agentè¿›è¡Œé€’å½’åˆ†å±‚æ€»ç»“ (2025-10-15 10:13Z)

_**User (2025-10-15 10:13Z)**_

å¦‚ä½•ä½¿ç”¨sub-agent,æ¯”å¦‚â€é€’å½’åˆ†æ‰¹æ¬¡æ€»ç»“ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹100ä¸ªtxtæ–‡ä»¶ï¼Œæ¯10è¿›è¡Œä¸€æ¬¡æ€»ç»“â€œ è¿™ç§sub-agentå¦‚ä½•å†™ã€‚

éœ€è¦ chapterç« èŠ‚è¿›è¡Œé€’å½’åˆ†å±‚æ€»ç»“ï¼Œæœ€ç»ˆå½¢æˆå°è¯´å¤§çº²ã€‚è¿™ä¸ªä»»åŠ¡ï¼š
ç¬¬ä¸€å±‚ï¼šæ¯10ç« æ€»ç»“ â†’200ä¸ªæ–‡ä»¶â†’æœ€ç»ˆå½¢æˆ 20ä¸ªå°æ‘˜è¦æ–‡ä»¶â†’å†™å…¥æ–‡ä»¶å¤¹ï¼ˆsection_summary01ï¼‰
ç¬¬äºŒå±‚ï¼šFolder section_summary01çš„æ¯10ä¸ªå°æ‘˜è¦æ–‡ä»¶å†æ€»ç»“ â†’ 20ä¸ªæ‘˜è¦æ–‡ä»¶â†’æœ€ç»ˆå½¢æˆ2ä¸ªæ€»ç»“æ–‡ä»¶ï¼ˆsection_summary02ï¼‰
ç¬¬ä¸‰å±‚ï¼šFolder section_summary02 çš„2ä¸ªæ–‡ä»¶å†æ€»ç»“ â†’ 1ä¸ªæ€»ç»“æ–‡ä»¶ï¼ˆsection_summary03ï¼‰



---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç”¨æˆ·æƒ³äº†è§£å¦‚ä½•ä½¿ç”¨sub-agentæ¥å®ç°é€’å½’åˆ†æ‰¹æ¬¡æ€»ç»“æ–‡ä»¶çš„åŠŸèƒ½ã€‚å…·ä½“ä»»åŠ¡æ˜¯ï¼š
1. æœ‰200ä¸ªtxtæ–‡ä»¶ï¼ˆç« èŠ‚ï¼‰
2. ç¬¬ä¸€å±‚ï¼šæ¯10ç« æ€»ç»“ä¸€æ¬¡ï¼Œç”Ÿæˆ20ä¸ªæ‘˜è¦æ–‡ä»¶åˆ°section_summary01æ–‡ä»¶å¤¹
3. ç¬¬äºŒå±‚ï¼šå°†section_summary01ä¸­çš„20ä¸ªæ‘˜è¦æ–‡ä»¶ï¼Œæ¯10ä¸ªæ€»ç»“ä¸€æ¬¡ï¼Œç”Ÿæˆ2ä¸ªæ–‡ä»¶åˆ°section_summary02æ–‡ä»¶å¤¹
4. ç¬¬ä¸‰å±‚ï¼šå°†section_summary02ä¸­çš„2ä¸ªæ–‡ä»¶æ€»ç»“æˆ1ä¸ªæœ€ç»ˆæ–‡ä»¶åˆ°section_summary03æ–‡ä»¶å¤¹

ç”¨æˆ·è¦æ±‚ç”¨ä¸­æ–‡äº¤æµï¼Œä»£ç ç”¨è‹±æ–‡å†™ã€‚

æˆ‘éœ€è¦ï¼š
1. å…ˆæŸ¥çœ‹sub-agentsçš„æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨
2. æ ¹æ®æ–‡æ¡£åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å®ç°è¿™ä¸ªé€’å½’æ€»ç»“çš„éœ€æ±‚</details></think>

---

æˆ‘æ¥å¸®ä½ äº†è§£å¦‚ä½•ä½¿ç”¨sub-agentæ¥å®ç°è¿™ä¸ªé€’å½’åˆ†å±‚æ€»ç»“çš„éœ€æ±‚ã€‚é¦–å…ˆè®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹sub-agentsçš„æ–‡æ¡£ã€‚

---

Tool use: **read_file**

Read file: docs/build-with-claude-code/sub-agents.md

---

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œæˆ‘ç°åœ¨äº†è§£äº†sub-agentçš„å·¥ä½œåŸç†ã€‚æ ¹æ®æ–‡æ¡£ï¼Œsub-agentæ˜¯ä¸“é—¨çš„AIåŠ©æ‰‹ï¼Œå¯ä»¥è¢«è°ƒç”¨æ¥å¤„ç†ç‰¹å®šç±»å‹çš„ä»»åŠ¡ã€‚

ç”¨æˆ·æƒ³è¦å®ç°ä¸€ä¸ªé€’å½’åˆ†å±‚æ€»ç»“çš„åŠŸèƒ½ï¼š
1. ç¬¬ä¸€å±‚ï¼šæ¯10ä¸ªç« èŠ‚æ–‡ä»¶æ€»ç»“ä¸€æ¬¡ï¼Œ200ä¸ªæ–‡ä»¶â†’20ä¸ªæ‘˜è¦ï¼ˆsection_summary01ï¼‰
2. ç¬¬äºŒå±‚ï¼šæ¯10ä¸ªç¬¬ä¸€å±‚æ‘˜è¦æ€»ç»“ä¸€æ¬¡ï¼Œ20ä¸ªâ†’2ä¸ªæ‘˜è¦ï¼ˆsection_summary02ï¼‰
3. ç¬¬ä¸‰å±‚ï¼š2ä¸ªç¬¬äºŒå±‚æ‘˜è¦â†’1ä¸ªæœ€ç»ˆæ‘˜è¦ï¼ˆsection_summary03ï¼‰

æˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªsub-agentæ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚è®©æˆ‘åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é…ç½®æ–‡ä»¶å’Œä¸€ä¸ªç¤ºä¾‹ç›®å½•ç»“æ„æ¥æ¼”ç¤ºã€‚</details></think>

---

ç°åœ¨æˆ‘ç†è§£äº†sub-agentçš„å·¥ä½œåŸç†ã€‚è®©æˆ‘ä¸ºä½ çš„é€’å½’åˆ†å±‚æ€»ç»“éœ€æ±‚åˆ›å»ºä¸€ä¸ªç¤ºä¾‹sub-agenté…ç½®ã€‚è¿™ä¸ªä»»åŠ¡éœ€è¦ä¸€ä¸ªä¸“é—¨çš„æ–‡æ¡£æ€»ç»“agentã€‚

---

Tool use: **write**


<details><summary>Edit file: docs/build-with-claude-code/examples/recursive-summarizer-agent.md</summary>

**Chunk 1**
Lines added: 279, lines removed: 1

```diff
@@ -1,1 +1,279 @@
- 
+ # Recursive Summarizer Sub-Agent Example
+ 
+ This example demonstrates how to create a sub-agent that recursively summarizes text files in batches, creating hierarchical summaries.
+ 
+ ## Use Case: Novel Chapter Summarization
+ 
+ Given 200 chapter files, create a hierarchical summary:
+ - **Layer 1**: Summarize every 10 chapters â†’ 20 summary files in `section_summary01/`
+ - **Layer 2**: Summarize every 10 Layer-1 summaries â†’ 2 summary files in `section_summary02/`
+ - **Layer 3**: Summarize 2 Layer-2 files â†’ 1 final outline in `section_summary03/`
+ 
+ ## Sub-Agent Configuration
+ 
+ Create this file at `.claude/agents/recursive-summarizer.md`:
+ 
+ ```markdown
+ ---
+ name: recursive-summarizer
+ description: Recursively summarizes text files in batches to create hierarchical summaries. Use proactively when asked to summarize large collections of text files in layers or batches.
+ tools: Read, Write, Bash, Grep, Glob
+ model: sonnet
+ ---
+ 
+ You are a specialized document summarization expert focused on creating hierarchical summaries from large collections of text files.
+ 
+ ## Your Responsibilities
+ 
+ When invoked to summarize files recursively:
+ 
+ 1. **Understand the structure**: Identify the source directory, batch size, and number of layers needed
+ 2. **Process systematically**: 
+    - Read files in batches (default: 10 files per batch)
+    - Create concise, coherent summaries for each batch
+    - Write summaries to the appropriate layer directory
+ 3. **Maintain context**: Each summary should preserve key plot points, character development, and narrative flow
+ 4. **Work recursively**: After completing one layer, automatically process the next layer until reaching the final summary
+ 
+ ## Summary Guidelines
+ 
+ For each batch:
+ - Identify main themes, events, and character development
+ - Preserve chronological order and narrative coherence
+ - Keep summaries concise but informative (approximately 200-500 words per batch of 10 files)
+ - Include chapter/file references for traceability
+ 
+ ## Output Format
+ 
+ Each summary file should include:
+ - Header: Source file range (e.g., "Summary of chapters 1-10")
+ - Key events and plot points
+ - Character developments
+ - Thematic elements
+ - Transitions to next section
+ 
+ ## Workflow
+ 
+ 1. List all files in source directory
+ 2. Calculate batch count based on batch size
+ 3. For each batch:
+    - Read the files
+    - Generate comprehensive summary
+    - Write to output directory with numbered filename
+ 4. After completing a layer, check if another layer is needed
+ 5. If yes, use previous layer's output as new input and repeat
+ 6. Report progress after each layer completion
+ 
+ Focus on creating summaries that maintain narrative coherence and could be used to create an overall novel outline.
+ ```
+ 
+ ## How to Use
+ 
+ ### Method 1: Explicit Invocation
+ 
+ Once the sub-agent is created, you can invoke it explicitly:
+ 
+ ```
+ > Use the recursive-summarizer subagent to process my novel chapters. 
+ > I have 200 txt files in ./chapters/ directory. 
+ > Create 3 layers: first layer with batches of 10 files, then recursively summarize.
+ ```
+ 
+ ### Method 2: Automatic Detection
+ 
+ If you describe a task that matches the agent's description, Claude will automatically use it:
+ 
+ ```
+ > I need to recursively summarize 200 chapter files in ./chapters/ directory.
+ > First batch every 10 chapters, then summarize those summaries, 
+ > and finally create a single outline.
+ ```
+ 
+ ## Example Implementation Script
+ 
+ You can also create a helper script to organize the workflow:
+ 
+ ```python
+ #!/usr/bin/env python3
+ """
+ Helper script to organize files for recursive summarization.
+ This prepares the directory structure but the actual summarization 
+ should be done by the recursive-summarizer sub-agent.
+ """
+ 
+ import os
+ from pathlib import Path
+ 
+ def prepare_summary_structure(source_dir, base_output_dir, batch_size=10):
+     """
+     Prepares the directory structure for hierarchical summarization.
+     
+     Args:
+         source_dir: Directory containing source text files
+         base_output_dir: Base directory for summary outputs
+         batch_size: Number of files per batch (default: 10)
+     """
+     source_path = Path(source_dir)
+     files = sorted(source_path.glob("*.txt"))
+     
+     # Calculate layers needed
+     total_files = len(files)
+     layer1_count = (total_files + batch_size - 1) // batch_size
+     layer2_count = (layer1_count + batch_size - 1) // batch_size
+     layer3_count = (layer2_count + batch_size - 1) // batch_size
+     
+     print(f"Source files: {total_files}")
+     print(f"Layer 1 summaries needed: {layer1_count}")
+     print(f"Layer 2 summaries needed: {layer2_count}")
+     print(f"Layer 3 summaries needed: {layer3_count}")
+     
+     # Create directories
+     for i in range(1, 4):
+         layer_dir = Path(base_output_dir) / f"section_summary0{i}"
+         layer_dir.mkdir(parents=True, exist_ok=True)
+         print(f"Created: {layer_dir}")
+     
+     return {
+         'total_files': total_files,
+         'layer1_count': layer1_count,
+         'layer2_count': layer2_count,
+         'layer3_count': layer3_count,
+         'batch_size': batch_size
+     }
+ 
+ if __name__ == "__main__":
+     # Example usage
+     info = prepare_summary_structure(
+         source_dir="./chapters",
+         base_output_dir="./summaries",
+         batch_size=10
+     )
+     
+     print("\nStructure prepared. Now use the recursive-summarizer sub-agent:")
+     print("Example: 'Use recursive-summarizer to summarize ./chapters in batches of 10'")
+ ```
+ 
+ ## Complete Workflow Example
+ 
+ Here's a step-by-step guide:
+ 
+ ### Step 1: Prepare Your Environment
+ 
+ ```bash
+ # Ensure you have your chapter files
+ ls -1 chapters/ | wc -l  # Should show 200 files
+ 
+ # Create output directories
+ mkdir -p summaries/section_summary01
+ mkdir -p summaries/section_summary02
+ mkdir -p summaries/section_summary03
+ ```
+ 
+ ### Step 2: Create the Sub-Agent
+ 
+ ```bash
+ # Create the agents directory if it doesn't exist
+ mkdir -p .claude/agents
+ 
+ # Create the sub-agent configuration
+ # (Copy the configuration from above into .claude/agents/recursive-summarizer.md)
+ ```
+ 
+ ### Step 3: Invoke the Sub-Agent
+ 
+ In Claude Code, run:
+ 
+ ```
+ > Use the recursive-summarizer subagent on my chapters/ directory:
+ > - Layer 1: Process 200 files, batch size 10 â†’ write 20 summaries to summaries/section_summary01/
+ > - Layer 2: Process those 20 files, batch size 10 â†’ write 2 summaries to summaries/section_summary02/
+ > - Layer 3: Process those 2 files â†’ write 1 final outline to summaries/section_summary03/
+ ```
+ 
+ ## Alternative: Manual Approach Without Sub-Agent
+ 
+ If you prefer not to use a sub-agent, you can accomplish this with a direct prompt:
+ 
+ ```
+ > I need you to recursively summarize my novel chapters:
+ > 
+ > Source: chapters/ (200 txt files)
+ > 
+ > Layer 1:
+ > - Read chapters in batches of 10
+ > - Create summary for each batch
+ > - Write to summaries/section_summary01/summary_01.txt through summary_20.txt
+ > 
+ > Layer 2:
+ > - Read summaries/section_summary01/ in batches of 10
+ > - Create summary for each batch
+ > - Write to summaries/section_summary02/summary_01.txt and summary_02.txt
+ > 
+ > Layer 3:
+ > - Read both files from summaries/section_summary02/
+ > - Create final comprehensive outline
+ > - Write to summaries/section_summary03/final_outline.txt
+ > 
+ > Please process this systematically, reporting progress after each layer.
+ ```
+ 
+ ## Tips for Best Results
+ 
+ 1. **File naming**: Use consistent naming (e.g., `chapter_001.txt`, `chapter_002.txt`) for predictable sorting
+ 2. **Batch size**: Adjust based on file length and context window limits
+ 3. **Progress tracking**: The sub-agent should report after each batch and layer
+ 4. **Quality control**: Review first few summaries to ensure quality before processing all files
+ 5. **Checkpointing**: Save summaries after each layer to avoid losing work
+ 
+ ## Advanced: Dynamic Batch Sizing
+ 
+ For very large files or to optimize context usage:
+ 
+ ```python
+ def calculate_optimal_layers(total_files, batch_size=10, target_layers=3):
+     """
+     Calculate the batch structure for achieving desired layer count.
+     """
+     current_count = total_files
+     layers = []
+     
+     for layer in range(target_layers - 1):
+         batches = (current_count + batch_size - 1) // batch_size
+         layers.append({
+             'layer': layer + 1,
+             'input_count': current_count,
+             'output_count': batches,
+             'batch_size': batch_size
+         })
+         current_count = batches
+     
+     # Final layer
+     layers.append({
+         'layer': target_layers,
+         'input_count': current_count,
+         'output_count': 1,
+         'batch_size': current_count
+     })
+     
+     return layers
+ 
+ # Example
+ layers = calculate_optimal_layers(200, batch_size=10, target_layers=3)
+ for layer in layers:
+     print(f"Layer {layer['layer']}: {layer['input_count']} files â†’ {layer['output_count']} summaries")
+ ```
+ 
+ ## Monitoring and Error Handling
+ 
+ The sub-agent should handle:
+ - Missing files gracefully
+ - Report which files were processed
+ - Save partial results if interrupted
+ - Validate that all input files were summarized
+ 
+ ## Related Documentation
+ 
+ - [Sub-agents Guide](../sub-agents.md)
+ - [MCP Integration](../mcp.md) - For connecting to external summarization tools
+ - [Hooks](../../reference/hooks.md) - For automating the workflow
+ 
```

</details>

---

<think><details><summary>Thought Process</summary>æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹æ–‡æ¡£ã€‚ç°åœ¨è®©æˆ‘å†åˆ›å»ºä¸€ä¸ªå®é™…å¯ç”¨çš„sub-agenté…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</details></think>

---

ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨çš„sub-agenté…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š

---

Tool use: **write**


<details><summary>Edit file: docs/build-with-claude-code/examples/agents/recursive-summarizer.md</summary>

**Chunk 1**
Lines added: 149, lines removed: 1

```diff
@@ -1,1 +1,149 @@
- 
+ ---
+ name: recursive-summarizer
+ description: Recursively summarizes text files in batches to create hierarchical summaries. Use proactively when asked to summarize large collections of text files in layers or batches, especially for novel chapters or document collections.
+ tools: Read, Write, Bash, Grep, Glob
+ model: sonnet
+ ---
+ 
+ You are a specialized document summarization expert focused on creating hierarchical summaries from large collections of text files.
+ 
+ ## Your Responsibilities
+ 
+ When invoked to summarize files recursively:
+ 
+ 1. **Understand the structure**: Identify the source directory, batch size, and number of layers needed
+ 2. **Process systematically**: 
+    - Read files in batches (default: 10 files per batch)
+    - Create concise, coherent summaries for each batch
+    - Write summaries to the appropriate layer directory
+ 3. **Maintain context**: Each summary should preserve key plot points, character development, and narrative flow
+ 4. **Work recursively**: After completing one layer, automatically process the next layer until reaching the final summary
+ 
+ ## Summary Guidelines
+ 
+ For novel chapters or narrative documents:
+ - Identify main themes, events, and character development
+ - Preserve chronological order and narrative coherence
+ - Keep summaries concise but informative (approximately 200-500 words per batch of 10 files)
+ - Include chapter/file references for traceability
+ 
+ For technical documents:
+ - Highlight key concepts and arguments
+ - Preserve logical flow and dependencies
+ - Note important definitions and conclusions
+ - Reference source sections for traceability
+ 
+ ## Output Format
+ 
+ Each summary file should include:
+ 
+ ```
+ # Summary of [Source Range]
+ Source: [filename1.txt - filename10.txt]
+ Date: [Current date]
+ 
+ ## Overview
+ [Brief overview of the content]
+ 
+ ## Key Points
+ 1. [First major point/event]
+ 2. [Second major point/event]
+ ...
+ 
+ ## Important Details
+ - [Character developments, plot twists, or technical details]
+ - [Thematic elements or key concepts]
+ 
+ ## Connections
+ - [Links to previous sections]
+ - [Foreshadowing or implications for later sections]
+ 
+ ---
+ Files processed: [list of source filenames]
+ ```
+ 
+ ## Workflow
+ 
+ 1. **Initialize**:
+    - List all files in source directory
+    - Sort files alphabetically/numerically
+    - Calculate total batches needed
+    - Create output directories if they don't exist
+ 
+ 2. **Layer 1 Processing**:
+    - For each batch of N files (default 10):
+      - Read all files in the batch
+      - Generate comprehensive summary
+      - Write to `section_summary01/summary_XX.txt`
+      - Report progress (e.g., "Completed batch 1/20")
+ 
+ 3. **Layer 2 Processing**:
+    - Read all files from `section_summary01/`
+    - Batch them (default 10 per batch)
+    - Generate higher-level summaries
+    - Write to `section_summary02/summary_XX.txt`
+    - Report progress
+ 
+ 4. **Layer 3+ Processing**:
+    - Continue until reaching a single final summary
+    - Final summary should be comprehensive and well-structured
+    - Include references to all major sections
+ 
+ 5. **Completion Report**:
+    - Total files processed per layer
+    - Location of output files
+    - Any errors or skipped files
+    - Recommendation for next steps
+ 
+ ## Error Handling
+ 
+ - If a file cannot be read, log the error but continue processing
+ - If a batch is incomplete, note it in the summary
+ - Save progress after each batch to prevent data loss
+ - If interrupted, provide instructions for resuming
+ 
+ ## Quality Standards
+ 
+ - Each summary must be readable and coherent on its own
+ - Maintain consistent terminology across summaries
+ - Preserve important names, dates, and references
+ - Use clear section headers and formatting
+ - Include sufficient context for understanding
+ 
+ ## Example Usage Patterns
+ 
+ Pattern 1 - Novel chapters:
+ ```
+ Source: 200 chapters
+ Layer 1: 200 files â†’ 20 summaries (10 chapters each)
+ Layer 2: 20 summaries â†’ 2 summaries (10 summaries each)
+ Layer 3: 2 summaries â†’ 1 final outline
+ ```
+ 
+ Pattern 2 - Research papers:
+ ```
+ Source: 50 papers
+ Layer 1: 50 papers â†’ 5 summaries (10 papers each)
+ Layer 2: 5 summaries â†’ 1 final literature review
+ ```
+ 
+ Pattern 3 - Meeting notes:
+ ```
+ Source: 100 daily notes
+ Layer 1: 100 notes â†’ 10 weekly summaries
+ Layer 2: 10 weekly â†’ 2 monthly summaries
+ Layer 3: 2 monthly â†’ 1 quarterly summary
+ ```
+ 
+ ## Best Practices
+ 
+ 1. **Read efficiently**: Use glob patterns to find files, batch reads when possible
+ 2. **Write atomically**: Complete each summary file before moving to the next
+ 3. **Name consistently**: Use zero-padded numbers (e.g., summary_01.txt, summary_02.txt)
+ 4. **Track progress**: Report after each batch and layer
+ 5. **Preserve structure**: Maintain the hierarchical relationships in your summaries
+ 6. **Stay focused**: Prioritize the most important information at each layer
+ 7. **Be thorough**: Don't skip files or batches unless explicitly instructed
+ 
+ Remember: Your goal is to create a pyramid of summaries where each layer provides increasing abstraction while preserving essential information. The final summary should give someone who hasn't read any source files a comprehensive understanding of the entire collection.
+ 
```

</details>

---

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªå®é™…çš„Pythonè„šæœ¬ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å‡†å¤‡æ–‡ä»¶ç»“æ„å’Œå¦‚ä½•ä¸sub-agenté…åˆå·¥ä½œã€‚</details></think>

---

ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªå®ç”¨çš„Pythonè„šæœ¬ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•é…åˆsub-agentä½¿ç”¨ï¼š

---

Tool use: **write**


<details><summary>Edit file: docs/build-with-claude-code/examples/scripts/prepare-recursive-summary.py</summary>

**Chunk 1**
Lines added: 243, lines removed: 1

```diff
@@ -1,1 +1,243 @@
- 
+ #!/usr/bin/env python3
+ """
+ Preparation script for recursive hierarchical summarization.
+ 
+ This script prepares the directory structure and calculates the layering
+ needed for hierarchical summarization of large document collections.
+ 
+ The actual summarization should be performed by the recursive-summarizer sub-agent.
+ 
+ Example usage:
+     python prepare-recursive-summary.py --source ./chapters --output ./summaries --batch-size 10
+ """
+ 
+ import argparse
+ import json
+ from pathlib import Path
+ from typing import Dict, List, Tuple
+ import sys
+ 
+ 
+ def count_files(directory: Path, pattern: str = "*.txt") -> int:
+     """Count files matching pattern in directory."""
+     return len(list(directory.glob(pattern)))
+ 
+ 
+ def calculate_layer_structure(total_files: int, batch_size: int = 10) -> List[Dict]:
+     """
+     Calculate the hierarchical structure needed for summarization.
+     
+     Args:
+         total_files: Number of source files
+         batch_size: Number of files to summarize per batch
+     
+     Returns:
+         List of dictionaries describing each layer
+     """
+     layers = []
+     current_count = total_files
+     layer_num = 1
+     
+     while current_count > 1:
+         batches_needed = (current_count + batch_size - 1) // batch_size
+         
+         layers.append({
+             'layer': layer_num,
+             'input_count': current_count,
+             'output_count': batches_needed,
+             'batch_size': min(batch_size, current_count),
+             'source_dir': f'section_summary{layer_num-1:02d}' if layer_num > 1 else 'source',
+             'output_dir': f'section_summary{layer_num:02d}'
+         })
+         
+         current_count = batches_needed
+         layer_num += 1
+     
+     return layers
+ 
+ 
+ def create_directory_structure(base_output_dir: Path, layers: List[Dict]) -> None:
+     """Create the directory structure for all summary layers."""
+     for layer in layers:
+         layer_dir = base_output_dir / layer['output_dir']
+         layer_dir.mkdir(parents=True, exist_ok=True)
+         print(f"âœ“ Created: {layer_dir}")
+ 
+ 
+ def generate_summary_manifest(
+     source_dir: Path,
+     output_dir: Path,
+     layers: List[Dict],
+     file_pattern: str
+ ) -> Dict:
+     """
+     Generate a manifest file with all the information needed for summarization.
+     
+     This manifest can be read by the sub-agent to understand the task.
+     """
+     source_files = sorted(source_dir.glob(file_pattern))
+     
+     manifest = {
+         'source_directory': str(source_dir.absolute()),
+         'output_directory': str(output_dir.absolute()),
+         'file_pattern': file_pattern,
+         'total_source_files': len(source_files),
+         'source_files': [f.name for f in source_files],
+         'layers': layers,
+         'instructions': {
+             'description': 'Hierarchical summarization task',
+             'process': 'Process each layer sequentially, using output from previous layer as input for next',
+             'batch_processing': 'Read and summarize files in batches according to batch_size',
+             'output_naming': 'Name files as summary_01.txt, summary_02.txt, etc.',
+             'final_output': f"Final summary will be in {layers[-1]['output_dir']}"
+         }
+     }
+     
+     return manifest
+ 
+ 
+ def save_manifest(manifest: Dict, output_dir: Path) -> Path:
+     """Save the manifest to a JSON file."""
+     manifest_path = output_dir / 'summary_manifest.json'
+     with manifest_path.open('w', encoding='utf-8') as f:
+         json.dump(manifest, f, indent=2, ensure_ascii=False)
+     return manifest_path
+ 
+ 
+ def print_summary_plan(layers: List[Dict], total_files: int) -> None:
+     """Print a human-readable summary of the layering plan."""
+     print("\n" + "="*70)
+     print("HIERARCHICAL SUMMARIZATION PLAN")
+     print("="*70)
+     print(f"\nTotal source files: {total_files}")
+     print(f"Total layers needed: {len(layers)}")
+     print(f"\nLayer breakdown:\n")
+     
+     for layer in layers:
+         print(f"Layer {layer['layer']}:")
+         print(f"  Input:  {layer['input_count']} files from {layer['source_dir']}")
+         print(f"  Output: {layer['output_count']} summaries to {layer['output_dir']}")
+         print(f"  Batch:  {layer['batch_size']} files per summary")
+         print()
+     
+     print("="*70)
+ 
+ 
+ def generate_claude_prompt(manifest: Dict) -> str:
+     """Generate a prompt for Claude Code to execute the summarization."""
+     layers = manifest['layers']
+     
+     prompt = f"""Use the recursive-summarizer subagent to process my documents:
+ 
+ Source: {manifest['source_directory']} ({manifest['total_source_files']} files)
+ Output: {manifest['output_directory']}
+ 
+ """
+     
+     for layer in layers:
+         prompt += f"""Layer {layer['layer']}:
+ - Read {layer['input_count']} files from {layer['source_dir']}
+ - Create {layer['output_count']} summaries (batch size: {layer['batch_size']})
+ - Write to {layer['output_dir']}/summary_XX.txt
+ 
+ """
+     
+     prompt += """Please process systematically, reporting progress after each batch and layer.
+ Save the final comprehensive summary/outline in the last layer directory.
+ """
+     
+     return prompt
+ 
+ 
+ def main():
+     parser = argparse.ArgumentParser(
+         description='Prepare directory structure for recursive hierarchical summarization'
+     )
+     parser.add_argument(
+         '--source',
+         type=str,
+         required=True,
+         help='Source directory containing files to summarize'
+     )
+     parser.add_argument(
+         '--output',
+         type=str,
+         required=True,
+         help='Output directory for summary layers'
+     )
+     parser.add_argument(
+         '--batch-size',
+         type=int,
+         default=10,
+         help='Number of files to summarize per batch (default: 10)'
+     )
+     parser.add_argument(
+         '--pattern',
+         type=str,
+         default='*.txt',
+         help='File pattern to match (default: *.txt)'
+     )
+     parser.add_argument(
+         '--generate-prompt',
+         action='store_true',
+         help='Generate a Claude Code prompt for the summarization task'
+     )
+     
+     args = parser.parse_args()
+     
+     # Validate source directory
+     source_dir = Path(args.source)
+     if not source_dir.exists():
+         print(f"Error: Source directory '{source_dir}' does not exist", file=sys.stderr)
+         sys.exit(1)
+     
+     # Count source files
+     total_files = count_files(source_dir, args.pattern)
+     if total_files == 0:
+         print(f"Error: No files matching '{args.pattern}' found in '{source_dir}'", file=sys.stderr)
+         sys.exit(1)
+     
+     print(f"\nFound {total_files} files in {source_dir}")
+     
+     # Calculate layer structure
+     layers = calculate_layer_structure(total_files, args.batch_size)
+     
+     # Print the plan
+     print_summary_plan(layers, total_files)
+     
+     # Create output directory structure
+     output_dir = Path(args.output)
+     output_dir.mkdir(parents=True, exist_ok=True)
+     print(f"\nCreating directory structure in {output_dir}...\n")
+     create_directory_structure(output_dir, layers)
+     
+     # Generate and save manifest
+     manifest = generate_summary_manifest(source_dir, output_dir, layers, args.pattern)
+     manifest_path = save_manifest(manifest, output_dir)
+     print(f"\nâœ“ Saved manifest to: {manifest_path}")
+     
+     # Generate Claude prompt if requested
+     if args.generate_prompt:
+         prompt = generate_claude_prompt(manifest)
+         prompt_path = output_dir / 'claude_prompt.txt'
+         with prompt_path.open('w', encoding='utf-8') as f:
+             f.write(prompt)
+         print(f"âœ“ Saved Claude prompt to: {prompt_path}")
+         print("\n" + "="*70)
+         print("COPY THIS PROMPT TO CLAUDE CODE:")
+         print("="*70)
+         print(prompt)
+         print("="*70)
+     
+     print("\nâœ… Preparation complete!")
+     print("\nNext steps:")
+     print("1. Review the layer structure above")
+     print("2. In Claude Code, use the recursive-summarizer subagent with the generated prompt")
+     print(f"3. Or manually run: cat {output_dir}/claude_prompt.txt")
+     print("\nAlternatively, invoke directly in Claude Code:")
+     print(f"  'Process {source_dir} using recursive-summarizer with batch size {args.batch_size}'")
+ 
+ 
+ if __name__ == '__main__':
+     main()
+ 
```

</details>

---

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºæ•´ä¸ªworkflowã€‚</details></think>

---

ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ä½¿ç”¨æŒ‡å—æ–‡æ¡£ï¼š

---

Tool use: **write**


<details><summary>Edit file: docs/build-with-claude-code/examples/recursive-summarization-guide.md</summary>

**Chunk 1**
Lines added: 420, lines removed: 1

```diff
@@ -1,1 +1,420 @@
- 
+ # é€’å½’åˆ†å±‚æ€»ç»“å®Œæ•´æŒ‡å— (Recursive Hierarchical Summarization Guide)
+ 
+ æœ¬æŒ‡å—å±•ç¤ºå¦‚ä½•ä½¿ç”¨sub-agentå®ç°å¤§è§„æ¨¡æ–‡æ¡£çš„é€’å½’åˆ†å±‚æ€»ç»“åŠŸèƒ½ã€‚
+ 
+ ## ä½¿ç”¨åœºæ™¯
+ 
+ é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š
+ - å°è¯´ç« èŠ‚æ€»ç»“ï¼ˆ200ç«  â†’ å±‚çº§æ‘˜è¦ â†’ å¤§çº²ï¼‰
+ - ç ”ç©¶è®ºæ–‡æ‰¹é‡ç»¼è¿°
+ - ä¼šè®®è®°å½•çš„å‘¨/æœˆ/å­£åº¦æ€»ç»“
+ - å¤§å‹æ–‡æ¡£é›†çš„çŸ¥è¯†æå–
+ 
+ ## å¿«é€Ÿå¼€å§‹
+ 
+ ### 1. åˆ›å»ºSub-Agent
+ 
+ åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.claude/agents/recursive-summarizer.md`ï¼š
+ 
+ ```bash
+ mkdir -p .claude/agents
+ ```
+ 
+ å°†ä»¥ä¸‹å†…å®¹ä¿å­˜åˆ°è¯¥æ–‡ä»¶ï¼š
+ 
+ ```markdown
+ ---
+ name: recursive-summarizer
+ description: Recursively summarizes text files in batches to create hierarchical summaries. Use proactively when asked to summarize large collections of text files.
+ tools: Read, Write, Bash, Grep, Glob
+ model: sonnet
+ ---
+ 
+ You are a specialized document summarization expert focused on creating hierarchical summaries.
+ 
+ When invoked:
+ 1. Read files in specified batches (default: 10 files)
+ 2. Generate coherent summaries for each batch
+ 3. Write summaries to appropriate layer directories
+ 4. Process recursively until reaching final summary
+ 
+ For each summary:
+ - Preserve key information and narrative flow
+ - Include source file references
+ - Maintain consistent formatting
+ - Report progress after each batch
+ 
+ Work systematically through all layers until complete.
+ ```
+ 
+ ### 2. å‡†å¤‡ç›®å½•ç»“æ„
+ 
+ å‡è®¾ä½ æœ‰200ä¸ªç« èŠ‚æ–‡ä»¶åœ¨ `chapters/` ç›®å½•ï¼š
+ 
+ ```bash
+ # åˆ›å»ºè¾“å‡ºç›®å½•
+ mkdir -p summaries/section_summary01
+ mkdir -p summaries/section_summary02
+ mkdir -p summaries/section_summary03
+ ```
+ 
+ ### 3. åœ¨Claude Codeä¸­è°ƒç”¨
+ 
+ åœ¨Claude Codeä¸­è¾“å…¥ï¼š
+ 
+ ```
+ ä½¿ç”¨ recursive-summarizer subagent å¤„ç†æˆ‘çš„å°è¯´ç« èŠ‚ï¼š
+ 
+ æºç›®å½•ï¼šchapters/ (200ä¸ªtxtæ–‡ä»¶)
+ 
+ ç¬¬ä¸€å±‚ï¼šæ¯10ç« æ€»ç»“ä¸€æ¬¡
+ - è¯»å– chapters/chapter_001.txt åˆ° chapter_010.txt
+ - ç”Ÿæˆæ‘˜è¦å†™å…¥ summaries/section_summary01/summary_01.txt
+ - ç»§ç»­å¤„ç†ä¸‹ä¸€æ‰¹10ç« ...
+ - æœ€ç»ˆç”Ÿæˆ20ä¸ªæ‘˜è¦æ–‡ä»¶
+ 
+ ç¬¬äºŒå±‚ï¼šæ¯10ä¸ªæ‘˜è¦æ€»ç»“ä¸€æ¬¡
+ - è¯»å– summaries/section_summary01/ ä¸­çš„å‰10ä¸ªæ‘˜è¦
+ - ç”Ÿæˆæ‘˜è¦å†™å…¥ summaries/section_summary02/summary_01.txt
+ - ç»§ç»­å¤„ç†å10ä¸ªæ‘˜è¦
+ - æœ€ç»ˆç”Ÿæˆ2ä¸ªæ‘˜è¦æ–‡ä»¶
+ 
+ ç¬¬ä¸‰å±‚ï¼šæœ€ç»ˆæ€»ç»“
+ - è¯»å– summaries/section_summary02/ ä¸­çš„2ä¸ªæ‘˜è¦
+ - ç”Ÿæˆæœ€ç»ˆå¤§çº²å†™å…¥ summaries/section_summary03/final_outline.txt
+ 
+ è¯·ç³»ç»Ÿæ€§å¤„ç†ï¼Œæ¯å®Œæˆä¸€å±‚åæŠ¥å‘Šè¿›åº¦ã€‚
+ ```
+ 
+ ## è¯¦ç»†ç¤ºä¾‹ï¼š200ç« å°è¯´æ€»ç»“
+ 
+ ### å±‚çº§ç»“æ„
+ 
+ ```
+ chapters/                           (200 files)
+     â”œâ”€ chapter_001.txt
+     â”œâ”€ chapter_002.txt
+     ...
+     â””â”€ chapter_200.txt
+               â†“
+ summaries/section_summary01/       (20 files)
+     â”œâ”€ summary_01.txt (chapters 1-10)
+     â”œâ”€ summary_02.txt (chapters 11-20)
+     ...
+     â””â”€ summary_20.txt (chapters 191-200)
+               â†“
+ summaries/section_summary02/       (2 files)
+     â”œâ”€ summary_01.txt (summaries 1-10)
+     â””â”€ summary_02.txt (summaries 11-20)
+               â†“
+ summaries/section_summary03/       (1 file)
+     â””â”€ final_outline.txt (complete outline)
+ ```
+ 
+ ### ç¬¬ä¸€å±‚å¤„ç†ç¤ºä¾‹
+ 
+ Sub-agentä¼šæŒ‰ä»¥ä¸‹æ–¹å¼å¤„ç†ï¼š
+ 
+ **æ‰¹æ¬¡1** (chapters 1-10):
+ ```
+ è¯»å–: chapter_001.txt, chapter_002.txt, ..., chapter_010.txt
+ ç”Ÿæˆ: summaries/section_summary01/summary_01.txt
+ 
+ å†…å®¹ç¤ºä¾‹ï¼š
+ # Summary of Chapters 1-10
+ Source: chapter_001.txt - chapter_010.txt
+ 
+ ## Overview
+ è¿™åç« ä»‹ç»äº†ä¸»è§’çš„èƒŒæ™¯å’Œåˆå§‹å†²çª...
+ 
+ ## Key Events
+ 1. ä¸»è§’ç™»åœºï¼Œå±•ç¤ºå…¶å¹³å‡¡çš„æ—¥å¸¸ç”Ÿæ´» (ç¬¬1-2ç« )
+ 2. æ„å¤–äº‹ä»¶æ‰“ç ´å¹³é™ï¼Œä¸»è§’è·å¾—ç‰¹æ®Šèƒ½åŠ› (ç¬¬3ç« )
+ 3. é¦–æ¬¡ä½¿ç”¨èƒ½åŠ›ï¼Œäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„åæœ (ç¬¬4-5ç« )
+ ...
+ 
+ ## Character Development
+ - ä¸»è§’ï¼šä»æ™®é€šå­¦ç”Ÿè½¬å˜ä¸ºèƒ½åŠ›è€…ï¼Œå†…å¿ƒæŒ£æ‰
+ - é…è§’Aï¼šå¯¼å¸ˆè§’è‰²å‡ºç°ï¼Œæä¾›å…³é”®æŒ‡å¼•
+ ...
+ 
+ ## Themes
+ - èƒ½åŠ›ä¸è´£ä»»
+ - æˆé•¿ä¸é€‰æ‹©
+ ...
+ ```
+ 
+ **æ‰¹æ¬¡2** (chapters 11-20):
+ ```
+ è¯»å–: chapter_011.txt, ..., chapter_020.txt
+ ç”Ÿæˆ: summaries/section_summary01/summary_02.txt
+ ```
+ 
+ ...ä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°ç”Ÿæˆ20ä¸ªæ‘˜è¦æ–‡ä»¶ã€‚
+ 
+ ### ç¬¬äºŒå±‚å¤„ç†ç¤ºä¾‹
+ 
+ **æ‰¹æ¬¡1** (summaries 1-10):
+ ```
+ è¯»å–: section_summary01/summary_01.txt åˆ° summary_10.txt
+ ç”Ÿæˆ: section_summary02/summary_01.txt
+ 
+ å†…å®¹ç¤ºä¾‹ï¼š
+ # Summary of Novel Part 1 (Chapters 1-100)
+ Source: summary_01.txt - summary_10.txt (Chapters 1-100)
+ 
+ ## Major Story Arcs
+ 1. èµ·æºç¯‡ (Chapters 1-30): ä¸»è§’è·å¾—èƒ½åŠ›å¹¶å­¦ä¹ æ§åˆ¶
+ 2. è®­ç»ƒç¯‡ (Chapters 31-60): æ­£å¼ä¿®ç‚¼ï¼Œç»“è¯†é‡è¦ä¼™ä¼´
+ 3. åˆè¯•ç¯‡ (Chapters 61-100): é¦–æ¬¡çœŸæ­£çš„æŒ‘æˆ˜ä¸æˆé•¿
+ 
+ ## Character Progression
+ - ä¸»è§’ï¼šä»æ–°æ‰‹åˆ°åˆæ­¥æŒæ¡èƒ½åŠ›
+ - ä¸»è¦é…è§’ç¾¤å»ºç«‹
+ - åæ´¾åŠ¿åŠ›åˆç°
+ 
+ ## Key Plot Points
+ - è·å¾—èƒ½åŠ›çš„çœŸç›¸æ­ç¤º (Chapter 25)
+ - é‡è¦å¯¼å¸ˆç‰ºç‰² (Chapter 58)
+ - ç¬¬ä¸€æ¬¡å¤§å‹æˆ˜æ–— (Chapters 85-92)
+ ...
+ ```
+ 
+ ### ç¬¬ä¸‰å±‚å¤„ç†ç¤ºä¾‹
+ 
+ ```
+ è¯»å–: section_summary02/summary_01.txt å’Œ summary_02.txt
+ ç”Ÿæˆ: section_summary03/final_outline.txt
+ 
+ å†…å®¹ç¤ºä¾‹ï¼š
+ # Complete Novel Outline: [å°è¯´æ ‡é¢˜]
+ Total Chapters: 200
+ 
+ ## Part 1: Origins and Training (Chapters 1-100)
+ [ä»summary_01.txtæ€»ç»“çš„å†…å®¹]
+ 
+ ### Act 1: Discovery (Chapters 1-30)
+ - ä¸»è§’èƒŒæ™¯ä¸ä¸–ç•Œè§‚å»ºç«‹
+ - è·å¾—èƒ½åŠ›çš„å¥‘æœº
+ - åˆæ­¥æ¢ç´¢ä¸å›°æƒ‘
+ 
+ ### Act 2: Development (Chapters 31-60)
+ - ç³»ç»Ÿæ€§è®­ç»ƒ
+ - ä¼™ä¼´å…³ç³»å»ºç«‹
+ - èƒ½åŠ›ä½“ç³»å±•å¼€
+ 
+ ### Act 3: First Trials (Chapters 61-100)
+ - å®æˆ˜è€ƒéªŒ
+ - é‡å¤§è½¬æŠ˜
+ - ä¸ºåç»­é“ºå«
+ 
+ ## Part 2: Challenges and Growth (Chapters 101-200)
+ [ä»summary_02.txtæ€»ç»“çš„å†…å®¹]
+ 
+ ### Act 4: Rising Conflict (Chapters 101-150)
+ ...
+ 
+ ### Act 5: Climax and Resolution (Chapters 151-200)
+ ...
+ 
+ ## Overall Themes
+ ...
+ 
+ ## Character Arcs
+ ...
+ 
+ ## World Building Elements
+ ...
+ 
+ ## Narrative Structure
+ ...
+ ```
+ 
+ ## ä½¿ç”¨Pythonè¾…åŠ©è„šæœ¬
+ 
+ å¯ä»¥ä½¿ç”¨å‡†å¤‡è„šæœ¬æ¥è‡ªåŠ¨åŒ–è®¾ç½®ï¼š
+ 
+ ```bash
+ # è¿è¡Œå‡†å¤‡è„šæœ¬
+ python docs/build-with-claude-code/examples/scripts/prepare-recursive-summary.py \
+     --source ./chapters \
+     --output ./summaries \
+     --batch-size 10 \
+     --generate-prompt
+ 
+ # è¾“å‡ºä¼šæ˜¾ç¤ºï¼š
+ # - å±‚çº§ç»“æ„è®¡ç®—
+ # - åˆ›å»ºçš„ç›®å½•
+ # - ä¸ºClaudeå‡†å¤‡çš„æç¤ºè¯
+ ```
+ 
+ ç„¶åå¤åˆ¶ç”Ÿæˆçš„æç¤ºè¯åˆ°Claude Codeä¸­æ‰§è¡Œã€‚
+ 
+ ## è‡ªå®šä¹‰é…ç½®
+ 
+ ### è°ƒæ•´æ‰¹æ¬¡å¤§å°
+ 
+ æ ¹æ®æ–‡ä»¶é•¿åº¦å’Œå¤æ‚åº¦è°ƒæ•´ï¼š
+ 
+ - **å°æ–‡ä»¶/ç®€å•å†…å®¹**: batch-size = 15-20
+ - **ä¸­ç­‰æ–‡ä»¶**: batch-size = 10 (é»˜è®¤)
+ - **å¤§æ–‡ä»¶/å¤æ‚å†…å®¹**: batch-size = 5-8
+ 
+ ### è°ƒæ•´æ‘˜è¦è¯¦ç»†ç¨‹åº¦
+ 
+ åœ¨sub-agenté…ç½®ä¸­ä¿®æ”¹ï¼š
+ 
+ ```markdown
+ ## Summary Guidelines
+ 
+ For detailed summaries (å­¦æœ¯/æŠ€æœ¯æ–‡æ¡£):
+ - Target: 500-1000 words per batch
+ - Include specific data, arguments, methods
+ - Preserve technical terminology
+ 
+ For concise summaries (å¿«é€Ÿæ¦‚è§ˆ):
+ - Target: 200-300 words per batch  
+ - Focus on main points only
+ - Use simple language
+ ```
+ 
+ ### ç‰¹å®šé¢†åŸŸå®šåˆ¶
+ 
+ **æŠ€æœ¯æ–‡æ¡£æ€»ç»“**ï¼š
+ ```markdown
+ Focus on:
+ - Core concepts and definitions
+ - Methodologies and algorithms
+ - Results and conclusions
+ - Dependencies between documents
+ ```
+ 
+ **å°è¯´ç« èŠ‚æ€»ç»“**ï¼š
+ ```markdown
+ Focus on:
+ - Plot progression
+ - Character development
+ - Thematic elements
+ - Foreshadowing and callbacks
+ ```
+ 
+ **ä¼šè®®è®°å½•æ€»ç»“**ï¼š
+ ```markdown
+ Focus on:
+ - Decisions made
+ - Action items
+ - Key discussions
+ - Attendees and dates
+ ```
+ 
+ ## è¿›é˜¶æŠ€å·§
+ 
+ ### 1. æ¸è¿›å¼éªŒè¯
+ 
+ åœ¨å¤„ç†å…¨éƒ¨æ–‡ä»¶å‰ï¼Œå…ˆæµ‹è¯•å°æ‰¹æ¬¡ï¼š
+ 
+ ```
+ å…ˆç”¨ recursive-summarizer å¤„ç†å‰30ç« ä½œä¸ºæµ‹è¯•ï¼š
+ - ç¬¬ä¸€å±‚ï¼šå‰30ç«  â†’ 3ä¸ªæ‘˜è¦
+ - ç¬¬äºŒå±‚ï¼š3ä¸ªæ‘˜è¦ â†’ 1ä¸ªæ€»ç»“
+ 
+ æ£€æŸ¥è´¨é‡åå†å¤„ç†å…¨éƒ¨200ç« ã€‚
+ ```
+ 
+ ### 2. æ–­ç‚¹ç»­ä¼ 
+ 
+ å¦‚æœå¤„ç†ä¸­æ–­ï¼Œå¯ä»¥ä»ç‰¹å®šå±‚çº§ç»§ç»­ï¼š
+ 
+ ```
+ ç»§ç»­å¤„ç†ç¬¬äºŒå±‚æ‘˜è¦ï¼š
+ - å·²å®Œæˆï¼šsection_summary01/ (20ä¸ªæ–‡ä»¶)
+ - ç»§ç»­ï¼šä»section_summary01/è¯»å–ï¼Œç”Ÿæˆsection_summary02/
+ ```
+ 
+ ### 3. å¹¶è¡Œå¤„ç†ï¼ˆé«˜çº§ï¼‰
+ 
+ å¯¹äºè¶…å¤§è§„æ¨¡ï¼ˆå¦‚1000+æ–‡ä»¶ï¼‰ï¼Œå¯ä»¥åˆ†åŒºå¤„ç†ï¼š
+ 
+ ```
+ åˆ†æˆä¸¤ç»„å¹¶è¡Œå¤„ç†ï¼š
+ ç»„1ï¼šchapters_part1/ (chapters 1-500)
+ ç»„2ï¼šchapters_part2/ (chapters 501-1000)
+ 
+ æœ€ååˆå¹¶ä¸¤ç»„çš„é¡¶å±‚æ‘˜è¦ã€‚
+ ```
+ 
+ ### 4. è´¨é‡æ§åˆ¶
+ 
+ åœ¨æ¯å±‚æ·»åŠ éªŒè¯æ­¥éª¤ï¼š
+ 
+ ```
+ å¤„ç†ç¬¬ä¸€å±‚åï¼š
+ 1. è¯»å–å‰3ä¸ªç”Ÿæˆçš„æ‘˜è¦
+ 2. æ£€æŸ¥æ ¼å¼æ˜¯å¦ä¸€è‡´
+ 3. éªŒè¯æ˜¯å¦åŒ…å«æºæ–‡ä»¶å¼•ç”¨
+ 4. ç¡®è®¤å†…å®¹è¿è´¯æ€§
+ 
+ å¦‚æœæ»¡æ„ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€å±‚ã€‚
+ ```
+ 
+ ## å¸¸è§é—®é¢˜
+ 
+ ### Q: Sub-agentä¼šè‡ªåŠ¨é€’å½’è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨æŒ‡å¯¼æ¯ä¸€å±‚ï¼Ÿ
+ 
+ A: å–å†³äºä½ çš„æç¤ºè¯ã€‚å¦‚æœæ˜ç¡®è¯´æ˜æ‰€æœ‰å±‚çº§ï¼Œsub-agentä¼šè‡ªåŠ¨å®Œæˆå…¨éƒ¨ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©æ¯å±‚å•ç‹¬æŒ‡å¯¼ã€‚
+ 
+ ### Q: å¤„ç†200ä¸ªæ–‡ä»¶å¤§çº¦éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
+ 
+ A: å–å†³äºï¼š
+ - æ–‡ä»¶å¤§å°ï¼ˆæ¯ä¸ªæ–‡ä»¶1-10KBè¾ƒå¿«ï¼‰
+ - æ‰¹æ¬¡å¤§å°ï¼ˆ10ä¸ª/æ‰¹æ˜¯å¹³è¡¡ç‚¹ï¼‰
+ - æ¨¡å‹é€Ÿåº¦ï¼ˆSonnetè¾ƒå¿«ï¼‰
+ 
+ ä¼°è®¡ï¼š200ä¸ª5KBæ–‡ä»¶ï¼Œçº¦10-20åˆ†é’Ÿå®Œæˆå…¨éƒ¨3å±‚ã€‚
+ 
+ ### Q: å¦‚ä½•ç¡®ä¿æ‘˜è¦è´¨é‡ä¸€è‡´ï¼Ÿ
+ 
+ A: åœ¨sub-agentçš„system promptä¸­ï¼š
+ - æä¾›æ˜ç¡®çš„æ ¼å¼æ¨¡æ¿
+ - å®šä¹‰è´¨é‡æ ‡å‡†
+ - è¦æ±‚åŒ…å«å¿…è¦å…ƒç´ ï¼ˆæºå¼•ç”¨ã€å…³é”®ç‚¹ç­‰ï¼‰
+ - ä½¿ç”¨ä¸€è‡´çš„æœ¯è¯­
+ 
+ ### Q: å¯ä»¥ç”¨äºéæ–‡æœ¬æ–‡ä»¶å—ï¼Ÿ
+ 
+ A: Sub-agentä¸»è¦å¤„ç†æ–‡æœ¬ã€‚å¯¹äºå…¶ä»–æ ¼å¼ï¼š
+ - PDF: å…ˆè½¬æ¢ä¸ºtxt
+ - Word: å¯¼å‡ºä¸ºtxt  
+ - Markdown: ç›´æ¥æ”¯æŒ
+ - ä»£ç æ–‡ä»¶: éœ€è¦ç‰¹åˆ«é…ç½®sub-agent
+ 
+ ### Q: å¦‚ä½•å¤„ç†ä¸åŒè¯­è¨€çš„æ–‡æ¡£ï¼Ÿ
+ 
+ A: åœ¨sub-agenté…ç½®ä¸­æŒ‡å®šï¼š
+ 
+ ```markdown
+ Language handling:
+ - Detect source file language
+ - Generate summaries in the same language
+ - Or: Generate summaries in [specified language]
+ ```
+ 
+ ## ç›¸å…³èµ„æº
+ 
+ - [Sub-agentsæ–‡æ¡£](../sub-agents.md)
+ - [MCPé›†æˆ](../mcp.md) - è¿æ¥å¤–éƒ¨æ‘˜è¦å·¥å…·
+ - [HooksæŒ‡å—](../../reference/hooks.md) - è‡ªåŠ¨åŒ–å·¥ä½œæµ
+ - [å·¥å…·é…ç½®](../../configuration/settings.md)
+ 
+ ## æ€»ç»“
+ 
+ ä½¿ç”¨sub-agentè¿›è¡Œé€’å½’åˆ†å±‚æ€»ç»“çš„å…³é”®ç‚¹ï¼š
+ 
+ 1. âœ… åˆ›å»ºä¸“é—¨çš„summarizer sub-agenté…ç½®
+ 2. âœ… å‡†å¤‡æ¸…æ™°çš„ç›®å½•ç»“æ„
+ 3. âœ… æä¾›æ˜ç¡®çš„å±‚çº§æŒ‡ç¤º
+ 4. âœ… è®©sub-agentç³»ç»Ÿæ€§åœ°å¤„ç†æ¯ä¸€å±‚
+ 5. âœ… åœ¨æ¯å±‚å®ŒæˆåéªŒè¯è´¨é‡
+ 
+ è¿™ç§æ–¹æ³•å¯ä»¥é«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ–‡æ¡£é›†åˆï¼Œç”Ÿæˆæœ‰ä»·å€¼çš„å±‚çº§æ‘˜è¦å’Œå¤§çº²ã€‚
+ 
```

</details>

---

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œæˆ‘å·²ç»åˆ›å»ºäº†è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹ã€‚ç°åœ¨è®©æˆ‘ä¸ºç”¨æˆ·æ€»ç»“ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨è¿™äº›èµ„æºï¼Œå¹¶ç»™å‡ºå®é™…å¯ä»¥å¤åˆ¶ç²˜è´´çš„é…ç½®æ–‡ä»¶ã€‚</details></think>

---

å®Œç¾ï¼æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†å®Œæ•´çš„é€’å½’åˆ†å±‚æ€»ç»“æŒ‡å—ã€‚è®©æˆ‘ä¸ºä½ æ€»ç»“ä¸€ä¸‹ï¼š

## ğŸ“š æˆ‘åˆ›å»ºçš„æ–‡æ¡£

1. **å®Œæ•´ä½¿ç”¨æŒ‡å—**ï¼ˆä¸­æ–‡ï¼‰ï¼š`docs/build-with-claude-code/examples/recursive-summarization-guide.md`
   - åŒ…å«å¿«é€Ÿå¼€å§‹æ­¥éª¤
   - 200ç« å°è¯´çš„å®Œæ•´ç¤ºä¾‹
   - æ¯ä¸€å±‚çš„è¯¦ç»†è¯´æ˜
   - å¸¸è§é—®é¢˜è§£ç­”

2. **Sub-Agenté…ç½®æ–‡ä»¶**ï¼š`docs/build-with-claude-code/examples/agents/recursive-summarizer.md`
   - å¯ç›´æ¥ä½¿ç”¨çš„sub-agentå®šä¹‰
   - åŒ…å«è¯¦ç»†çš„å¤„ç†é€»è¾‘

3. **Pythonè¾…åŠ©è„šæœ¬**ï¼š`docs/build-with-claude-code/examples/scripts/prepare-recursive-summary.py`
   - è‡ªåŠ¨è®¡ç®—å±‚çº§ç»“æ„
   - åˆ›å»ºç›®å½•
   - ç”ŸæˆClaudeæç¤ºè¯

4. **è¯¦ç»†ç¤ºä¾‹æ–‡æ¡£**ï¼ˆè‹±æ–‡ï¼‰ï¼š`docs/build-with-claude-code/examples/recursive-summarizer-agent.md`
   - æŠ€æœ¯ç»†èŠ‚å’Œæœ€ä½³å®è·µ

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼‰

### æ­¥éª¤1ï¼šåˆ›å»ºSub-Agent

åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š

---

Tool use: **run_terminal_cmd**

```bash
mkdir -p .claude/agents
```

```
D:\github\2015\claude-code-mirror-docs-worktrees\claude-code-docs-mirror-dev>mkdir -p .claude/agents
å‘½ä»¤è¯­æ³•ä¸æ­£ç¡®ã€‚

D:\github\2015\claude-code-mirror-docs-worktrees\claude-code-docs-mirror-dev>
```

---

<think><details><summary>Thought Process</summary>Windowsç³»ç»Ÿï¼Œéœ€è¦ç”¨Windowså‘½ä»¤ã€‚</details></think>

---

Tool use: **run_terminal_cmd**

```bash
if not exist .claude\agents mkdir .claude\agents
```

```
D:\github\2015\claude-code-mirror-docs-worktrees\claude-code-docs-mirror-dev>if not exist .claude\agents mkdir .claude\agents

D:\github\2015\claude-code-mirror-docs-worktrees\claude-code-docs-mirror-dev>
```

---

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œç°åœ¨æŠŠsub-agenté…ç½®æ–‡ä»¶å¤åˆ¶åˆ°.claude/agentsç›®å½•ã€‚</details></think>

---

Tool use: **run_terminal_cmd**

```bash
copy docs\build-with-claude-code\examples\agents\recursive-summarizer.md .claude\agents\recursive-summarizer.md
```

```
D:\github\2015\claude-code-mirror-docs-worktrees\claude-code-docs-mirror-dev>copy docs\build-with-claude-code\examples\agents\recursive-summarizer.md .claude\agents\recursive-summarizer.md
å·²å¤åˆ¶         1 ä¸ªæ–‡ä»¶ã€‚

D:\github\2015\claude-code-mirror-docs-worktrees\claude-code-docs-mirror-dev>
```

---

<think><details><summary>Thought Process</summary>å®Œç¾ï¼ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ç›®å½•ç»“æ„æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ã€‚</details></think>

---

å®Œç¾ï¼ç°åœ¨è®©æˆ‘åˆ›å»ºä¸€ä¸ªå®é™…å¯ç”¨çš„ç¤ºä¾‹ï¼š

---

Tool use: **write**


<details><summary>Edit file: docs/build-with-claude-code/examples/EXAMPLE-USAGE.md</summary>

**Chunk 1**
Lines added: 452, lines removed: 1

```diff
@@ -1,1 +1,452 @@
- 
+ # é€’å½’æ€»ç»“Sub-Agentä½¿ç”¨ç¤ºä¾‹
+ 
+ ## âœ… å·²å°±ç»ª
+ 
+ Sub-agenté…ç½®å·²ç»åˆ›å»ºåœ¨ï¼š`.claude/agents/recursive-summarizer.md`
+ 
+ ## ğŸ¯ ä½ çš„ä»»åŠ¡éœ€æ±‚
+ 
+ å¤„ç†200ä¸ªç« èŠ‚æ–‡ä»¶ï¼Œç”Ÿæˆ3å±‚é€’å½’æ‘˜è¦ï¼š
+ 
+ ```
+ ç¬¬ä¸€å±‚ï¼š200ä¸ªç« èŠ‚ â†’ 20ä¸ªæ‘˜è¦ï¼ˆæ¯10ç« ä¸€ä¸ªæ‘˜è¦ï¼‰â†’ section_summary01/
+ ç¬¬äºŒå±‚ï¼š20ä¸ªæ‘˜è¦ â†’ 2ä¸ªæ‘˜è¦ï¼ˆæ¯10ä¸ªæ‘˜è¦ç”Ÿæˆ1ä¸ªï¼‰â†’ section_summary02/
+ ç¬¬ä¸‰å±‚ï¼š2ä¸ªæ‘˜è¦ â†’ 1ä¸ªæœ€ç»ˆå¤§çº² â†’ section_summary03/
+ ```
+ 
+ ## ğŸ“ ä½¿ç”¨æ–¹æ³•
+ 
+ ### æ–¹æ³•1ï¼šç›´æ¥åœ¨Claude Codeä¸­ä½¿ç”¨
+ 
+ å‡è®¾ä½ çš„ç« èŠ‚æ–‡ä»¶åœ¨ `D:/novels/my-novel/chapters/` ç›®å½•ä¸‹ï¼ŒåŒ…å«ï¼š
+ - `chapter_001.txt`
+ - `chapter_002.txt`
+ - ...
+ - `chapter_200.txt`
+ 
+ åœ¨Claude Codeä¸­è¾“å…¥ä»¥ä¸‹æç¤ºè¯ï¼š
+ 
+ ```
+ ä½¿ç”¨ recursive-summarizer subagent å¤„ç†æˆ‘çš„å°è¯´ç« èŠ‚ï¼š
+ 
+ æºç›®å½•ï¼šD:/novels/my-novel/chapters/ (200ä¸ªtxtæ–‡ä»¶ï¼Œå‘½åä¸ºchapter_001.txtåˆ°chapter_200.txt)
+ è¾“å‡ºç›®å½•ï¼šD:/novels/my-novel/summaries/
+ 
+ ç¬¬ä¸€å±‚å¤„ç†ï¼š
+ - æ‰¹æ¬¡å¤§å°ï¼šæ¯10ä¸ªç« èŠ‚
+ - å¤„ç†ï¼šè¯»å–chapter_001.txtåˆ°chapter_010.txtï¼Œç”Ÿæˆæ‘˜è¦
+ - è¾“å‡ºï¼šå†™å…¥ summaries/section_summary01/summary_01.txt
+ - ç»§ç»­å¤„ç†chapter_011.txtåˆ°chapter_020.txt â†’ summary_02.txt
+ - ...ä¾æ­¤ç±»æ¨
+ - æœ€ç»ˆï¼šç”Ÿæˆ20ä¸ªæ‘˜è¦æ–‡ä»¶ï¼ˆsummary_01.txt åˆ° summary_20.txtï¼‰
+ 
+ ç¬¬äºŒå±‚å¤„ç†ï¼š
+ - æ‰¹æ¬¡å¤§å°ï¼šæ¯10ä¸ªæ‘˜è¦
+ - å¤„ç†ï¼šè¯»å–section_summary01/summary_01.txtåˆ°summary_10.txt
+ - è¾“å‡ºï¼šå†™å…¥ summaries/section_summary02/summary_01.txt
+ - ç»§ç»­å¤„ç†summary_11.txtåˆ°summary_20.txt â†’ summary_02.txt
+ - æœ€ç»ˆï¼šç”Ÿæˆ2ä¸ªæ‘˜è¦æ–‡ä»¶
+ 
+ ç¬¬ä¸‰å±‚å¤„ç†ï¼š
+ - è¯»å–ï¼šsection_summary02/summary_01.txt å’Œ summary_02.txt
+ - ç”Ÿæˆï¼šæœ€ç»ˆå®Œæ•´å¤§çº²
+ - è¾“å‡ºï¼šå†™å…¥ summaries/section_summary03/final_outline.txt
+ 
+ è¯·ç³»ç»Ÿæ€§åœ°é€å±‚å¤„ç†ï¼Œæ¯å®Œæˆä¸€å±‚åæŠ¥å‘Šè¿›åº¦å’Œç»Ÿè®¡ä¿¡æ¯ã€‚
+ ```
+ 
+ ### æ–¹æ³•2ï¼šä½¿ç”¨Pythonè„šæœ¬è¾…åŠ©
+ 
+ é¦–å…ˆè¿è¡Œå‡†å¤‡è„šæœ¬ï¼š
+ 
+ ```bash
+ # Windows PowerShellæˆ–Git Bash
+ python docs/build-with-claude-code/examples/scripts/prepare-recursive-summary.py \
+     --source "D:/novels/my-novel/chapters" \
+     --output "D:/novels/my-novel/summaries" \
+     --batch-size 10 \
+     --generate-prompt
+ ```
+ 
+ è¿™å°†ï¼š
+ 1. è®¡ç®—éœ€è¦çš„å±‚çº§ç»“æ„
+ 2. åˆ›å»ºæ‰€éœ€çš„ç›®å½•
+ 3. ç”Ÿæˆä¸€ä¸ªä¼˜åŒ–çš„Claudeæç¤ºè¯
+ 
+ ç„¶åå¤åˆ¶ç”Ÿæˆçš„æç¤ºè¯åˆ°Claude Codeä¸­æ‰§è¡Œã€‚
+ 
+ ### æ–¹æ³•3ï¼šé€å±‚æ‰‹åŠ¨æ§åˆ¶
+ 
+ å¦‚æœä½ æƒ³æ›´ç»†è‡´åœ°æ§åˆ¶æ¯ä¸€å±‚ï¼š
+ 
+ **ç¬¬ä¸€å±‚**ï¼š
+ ```
+ ä½¿ç”¨ recursive-summarizer å¤„ç†ç¬¬ä¸€å±‚ï¼š
+ - æºï¼šD:/novels/my-novel/chapters/ (200ä¸ªæ–‡ä»¶)
+ - è¾“å‡ºï¼šD:/novels/my-novel/summaries/section_summary01/
+ - æ‰¹æ¬¡ï¼šæ¯10ä¸ªç« èŠ‚ç”Ÿæˆ1ä¸ªæ‘˜è¦
+ - å‘½åï¼šsummary_01.txt, summary_02.txt, ..., summary_20.txt
+ ```
+ 
+ ç­‰ç¬¬ä¸€å±‚å®Œæˆå¹¶éªŒè¯è´¨é‡åï¼Œå†è¿›è¡Œç¬¬äºŒå±‚ï¼š
+ 
+ **ç¬¬äºŒå±‚**ï¼š
+ ```
+ ä½¿ç”¨ recursive-summarizer å¤„ç†ç¬¬äºŒå±‚ï¼š
+ - æºï¼šD:/novels/my-novel/summaries/section_summary01/ (20ä¸ªæ‘˜è¦æ–‡ä»¶)
+ - è¾“å‡ºï¼šD:/novels/my-novel/summaries/section_summary02/
+ - æ‰¹æ¬¡ï¼šæ¯10ä¸ªæ‘˜è¦ç”Ÿæˆ1ä¸ªæ€»ç»“
+ - å‘½åï¼šsummary_01.txt, summary_02.txt
+ ```
+ 
+ **ç¬¬ä¸‰å±‚**ï¼š
+ ```
+ ä½¿ç”¨ recursive-summarizer å¤„ç†ç¬¬ä¸‰å±‚ï¼š
+ - æºï¼šD:/novels/my-novel/summaries/section_summary02/ (2ä¸ªæ–‡ä»¶)
+ - è¾“å‡ºï¼šD:/novels/my-novel/summaries/section_summary03/final_outline.txt
+ - ç”Ÿæˆï¼šæœ€ç»ˆå®Œæ•´å¤§çº²
+ ```
+ 
+ ## ğŸ“ é¢„æœŸè¾“å‡ºç»“æ„
+ 
+ ```
+ D:/novels/my-novel/
+ â”œâ”€â”€ chapters/
+ â”‚   â”œâ”€â”€ chapter_001.txt
+ â”‚   â”œâ”€â”€ chapter_002.txt
+ â”‚   ...
+ â”‚   â””â”€â”€ chapter_200.txt
+ â”‚
+ â””â”€â”€ summaries/
+     â”œâ”€â”€ section_summary01/          # ç¬¬ä¸€å±‚ï¼š20ä¸ªæ–‡ä»¶
+     â”‚   â”œâ”€â”€ summary_01.txt          # ç« èŠ‚1-10çš„æ‘˜è¦
+     â”‚   â”œâ”€â”€ summary_02.txt          # ç« èŠ‚11-20çš„æ‘˜è¦
+     â”‚   ...
+     â”‚   â””â”€â”€ summary_20.txt          # ç« èŠ‚191-200çš„æ‘˜è¦
+     â”‚
+     â”œâ”€â”€ section_summary02/          # ç¬¬äºŒå±‚ï¼š2ä¸ªæ–‡ä»¶
+     â”‚   â”œâ”€â”€ summary_01.txt          # å‰100ç« çš„æ€»ç»“
+     â”‚   â””â”€â”€ summary_02.txt          # å100ç« çš„æ€»ç»“
+     â”‚
+     â””â”€â”€ section_summary03/          # ç¬¬ä¸‰å±‚ï¼š1ä¸ªæ–‡ä»¶
+         â””â”€â”€ final_outline.txt       # å…¨ä¹¦å¤§çº²
+ ```
+ 
+ ## ğŸ¨ æ‘˜è¦å†…å®¹ç¤ºä¾‹
+ 
+ ### ç¬¬ä¸€å±‚æ‘˜è¦ç¤ºä¾‹ (summary_01.txt)
+ 
+ ```markdown
+ # Summary of Chapters 1-10
+ Source: chapter_001.txt - chapter_010.txt
+ Generated: 2025-10-15
+ 
+ ## Overview
+ æœ¬éƒ¨åˆ†ä¸ºå°è¯´å¼€ç¯‡ï¼Œä»‹ç»ä¸»è§’å¼ ä¸‰çš„å¹³å‡¡ç”Ÿæ´»åŠå…¶æ„å¤–è·å¾—ç‰¹æ®Šèƒ½åŠ›çš„è¿‡ç¨‹ã€‚
+ å»ºç«‹äº†åŸºæœ¬çš„ä¸–ç•Œè§‚è®¾å®šå’Œä¸»è¦è§’è‰²å…³ç³»ã€‚
+ 
+ ## Key Events
+ 1. **ç¬¬1-2ç« **ï¼šä¸»è§’å¼ ä¸‰çš„æ—¥å¸¸ç”Ÿæ´»ï¼Œåˆ»ç”»å…¶æ€§æ ¼ç‰¹ç‚¹
+ 2. **ç¬¬3ç« **ï¼šç¥ç§˜äº‹ä»¶å‘ç”Ÿï¼Œä¸»è§’æ„å¤–æ¥è§¦åˆ°å¤è€é—è¿¹
+ 3. **ç¬¬4-5ç« **ï¼šè§‰é†’ç‰¹æ®Šèƒ½åŠ›ï¼Œåˆæ¬¡ä½¿ç”¨äº§ç”Ÿæ··ä¹±
+ 4. **ç¬¬6-7ç« **ï¼šé‡åˆ°å¯¼å¸ˆæå››ï¼Œå¼€å§‹äº†è§£èƒ½åŠ›æœ¬è´¨
+ 5. **ç¬¬8-10ç« **ï¼šåŸºç¡€è®­ç»ƒï¼Œé€æ­¥æŒæ§èƒ½åŠ›
+ 
+ ## Character Development
+ - **å¼ ä¸‰ï¼ˆä¸»è§’ï¼‰**ï¼šä»æ™®é€šé«˜ä¸­ç”Ÿåˆ°èƒ½åŠ›è§‰é†’è€…ï¼Œç»å†è¿·èŒ«ä¸å¥½å¥‡
+ - **æå››ï¼ˆå¯¼å¸ˆï¼‰**ï¼šç¥ç§˜çš„å¼•å¯¼è€…ï¼Œé€éœ²éƒ¨åˆ†ä¸–ç•ŒçœŸç›¸
+ - **ç‹äº”ï¼ˆå¥½å‹ï¼‰**ï¼šæ”¯æŒä¸»è§’çš„æ™®é€šäººï¼Œä»£è¡¨æ—¥å¸¸ä¸–ç•Œçš„è”ç³»
+ 
+ ## Important Details
+ - èƒ½åŠ›ä½“ç³»åˆæ­¥å±•ç¤ºï¼šå…ƒç´ æ“æ§ã€æ„ŸçŸ¥å¢å¼º
+ - ä¸–ç•Œè§‚ï¼šæ™®é€šä¸–ç•Œä¸éšè—çš„èƒ½åŠ›è€…ä¸–ç•Œå¹¶å­˜
+ - ä¼ç¬”ï¼šå¤è€é—è¿¹çš„æ¥å†ã€å¯¼å¸ˆçš„çœŸå®èº«ä»½
+ 
+ ## Themes
+ - å¹³å‡¡ä¸éå‡¡çš„è¾¹ç•Œ
+ - èƒ½åŠ›å¸¦æ¥çš„è´£ä»»
+ - æˆé•¿ä¸è‡ªæˆ‘è®¤çŸ¥
+ 
+ ## Connections
+ - **æ‰¿æ¥å‰æ–‡**ï¼šN/Aï¼ˆå¼€ç¯‡ï¼‰
+ - **å¼•å‡ºåç»­**ï¼šèƒ½åŠ›çš„æ·±å±‚æ¥æºã€æ›´å¤§çš„ä¸–ç•Œæ ¼å±€
+ 
+ ---
+ Files processed: chapter_001.txt, chapter_002.txt, chapter_003.txt, chapter_004.txt, 
+ chapter_005.txt, chapter_006.txt, chapter_007.txt, chapter_008.txt, chapter_009.txt, 
+ chapter_010.txt
+ ```
+ 
+ ### ç¬¬äºŒå±‚æ‘˜è¦ç¤ºä¾‹ (summary_01.txt)
+ 
+ ```markdown
+ # Summary of Part 1: Chapters 1-100
+ Source: section_summary01/summary_01.txt - summary_10.txt
+ Generated: 2025-10-15
+ 
+ ## Major Story Arcs
+ 
+ ### Arc 1: è§‰é†’ç¯‡ (Chapters 1-30)
+ ä¸»è§’å¼ ä¸‰ä»æ™®é€šäººåˆ°èƒ½åŠ›è§‰é†’ï¼Œåœ¨å¯¼å¸ˆæå››çš„å¼•å¯¼ä¸‹å¼€å§‹ç†è§£è¿™ä¸ªéšè—çš„ä¸–ç•Œã€‚
+ å»ºç«‹äº†åŸºæœ¬çš„èƒ½åŠ›ä½“ç³»å’Œä¸–ç•Œè§‚æ¡†æ¶ã€‚
+ 
+ ### Arc 2: è®­ç»ƒç¯‡ (Chapters 31-60)
+ ç³»ç»Ÿæ€§çš„èƒ½åŠ›è®­ç»ƒï¼Œç»“è¯†åŒæœŸçš„èƒ½åŠ›è€…ä¼™ä¼´ã€‚é€æ­¥æ­ç¤ºèƒ½åŠ›è€…ç»„ç»‡çš„å­˜åœ¨ï¼Œ
+ ä»¥åŠç»´æŠ¤å¹³è¡¡çš„ä½¿å‘½ã€‚æœŸé—´é­é‡å°è§„æ¨¡å†²çªï¼Œå±•ç°æˆé•¿ã€‚
+ 
+ ### Arc 3: è¯•ç‚¼ç¯‡ (Chapters 61-100)
+ é¦–æ¬¡å¤§å‹ä»»åŠ¡ï¼Œé¢å¯¹çœŸæ­£çš„å¨èƒã€‚å¯¼å¸ˆæå››åœ¨å…³é”®æ—¶åˆ»ç‰ºç‰²ä¿æŠ¤å­¦ç”Ÿï¼Œ
+ ä¸»è§’åœ¨ç—›è‹¦ä¸­å®ç°çªç ´ã€‚åˆæ­¥äº†è§£åˆ°æ›´å¤§çš„é˜´è°‹ã€‚
+ 
+ ## Character Progression
+ 
+ **ä¸»è¦è§’è‰²å‘å±•**ï¼š
+ - **å¼ ä¸‰**ï¼šä»æ–°æ‰‹â†’åˆçº§èƒ½åŠ›è€…â†’ç»å†æŒ«æŠ˜åçš„æˆç†Ÿè€…
+ - **ä¼™ä¼´å›¢é˜Ÿå»ºç«‹**ï¼šèµµå…­ï¼ˆæŠ€æœ¯å‹ï¼‰ã€å­™ä¸ƒï¼ˆæˆ˜æ–—å‹ï¼‰ã€å‘¨å…«ï¼ˆæ²»ç–—å‹ï¼‰
+ - **åæ´¾åŠ¿åŠ›**ï¼šæš—å½±ç»„ç»‡åˆéœ²ç«¯å€ªï¼Œé¦–é¢†èº«ä»½æˆè°œ
+ 
+ **é‡è¦è½¬æŠ˜**ï¼š
+ - Chapter 25ï¼šèƒ½åŠ›æ¥æºçš„éƒ¨åˆ†çœŸç›¸
+ - Chapter 58ï¼šå¯¼å¸ˆæå››ç‰ºç‰²
+ - Chapters 85-92ï¼šå¤§å‹æˆ˜æ–—ï¼Œåˆéœ²é”‹èŠ’
+ 
+ ## World Building Elements
+ - èƒ½åŠ›è€…ç»„ç»‡"å®ˆæŠ¤è€…è”ç›Ÿ"
+ - èƒ½åŠ›ç­‰çº§ä½“ç³»ï¼šè§‰é†’â†’ä¿®ä¹ â†’ç²¾é€šâ†’è¶…è¶Š
+ - å…ƒç´ å±æ€§ä¸å…‹åˆ¶å…³ç³»
+ - éšè—ä¸–ç•Œçš„è¿ä½œè§„åˆ™
+ 
+ ## Thematic Development
+ - ä»"èƒ½åŠ›æ˜¯ä»€ä¹ˆ"åˆ°"å¦‚ä½•ä½¿ç”¨èƒ½åŠ›"
+ - è´£ä»»æ„è¯†çš„å»ºç«‹
+ - ç‰ºç‰²ä¸ä¼ æ‰¿
+ - å›¢é˜Ÿåä½œçš„é‡è¦æ€§
+ 
+ ## Key Plot Points Requiring Follow-up
+ - å¯¼å¸ˆé—è¨€ä¸­æåˆ°çš„"çœŸæ­£çš„å¨èƒ"
+ - æš—å½±ç»„ç»‡çš„æœ€ç»ˆç›®çš„
+ - ä¸»è§’ç‰¹æ®Šèƒ½åŠ›çš„çœŸå®æ¥æº
+ - å¤è€é¢„è¨€çš„å«ä¹‰
+ 
+ ---
+ Summaries processed: summary_01.txt through summary_10.txt (Chapters 1-100)
+ ```
+ 
+ ### ç¬¬ä¸‰å±‚æœ€ç»ˆå¤§çº²ç¤ºä¾‹ (final_outline.txt)
+ 
+ ```markdown
+ # å®Œæ•´å°è¯´å¤§çº²ï¼šã€Šè§‰é†’ä¹‹è·¯ã€‹
+ Total Chapters: 200
+ Analysis Date: 2025-10-15
+ 
+ ## æ•´ä½“ç»“æ„
+ 
+ ### ç¬¬ä¸€éƒ¨ï¼šèµ·æºä¸æˆé•¿ (Chapters 1-100)
+ **ä¸»é¢˜**ï¼šä»å¹³å‡¡åˆ°éå‡¡çš„èœ•å˜
+ 
+ #### ç¬¬ä¸€é˜¶æ®µï¼šè§‰é†’ (Ch 1-30)
+ - ä¸»è§’å¼ ä¸‰æ„å¤–è·å¾—èƒ½åŠ›
+ - å¯¼å¸ˆæå››å¼•å¯¼å…¥é—¨
+ - å»ºç«‹ä¸–ç•Œè§‚å’Œèƒ½åŠ›ä½“ç³»åŸºç¡€
+ - **å…³é”®äº‹ä»¶**ï¼šé—è¿¹è§‰é†’ï¼ˆCh 3ï¼‰ã€é¦–æ¬¡è®­ç»ƒï¼ˆCh 8-10ï¼‰
+ 
+ #### ç¬¬äºŒé˜¶æ®µï¼šä¿®ç‚¼ (Ch 31-60)
+ - ç³»ç»Ÿæ€§èƒ½åŠ›è®­ç»ƒ
+ - ä¼™ä¼´å›¢é˜Ÿå»ºç«‹ï¼ˆèµµå…­ã€å­™ä¸ƒã€å‘¨å…«ï¼‰
+ - å°è§„æ¨¡ä»»åŠ¡ä¸å†²çª
+ - **å…³é”®äº‹ä»¶**ï¼šçœŸç›¸æ­ç¤ºï¼ˆCh 25ï¼‰ã€å›¢é˜Ÿæˆç«‹ï¼ˆCh 45ï¼‰
+ 
+ #### ç¬¬ä¸‰é˜¶æ®µï¼šè¯•ç‚¼ (Ch 61-100)
+ - é¦–æ¬¡å¤§å‹å¨èƒ
+ - å¯¼å¸ˆç‰ºç‰²ï¼Œä¸»è§’æˆé•¿
+ - æš—å½±ç»„ç»‡æµ®ç°
+ - **å…³é”®äº‹ä»¶**ï¼šå¤§å‹æˆ˜æ–—ï¼ˆCh 85-92ï¼‰ã€å¯¼å¸ˆç‰ºç‰²ï¼ˆCh 58ï¼‰
+ 
+ ### ç¬¬äºŒéƒ¨ï¼šæŒ‘æˆ˜ä¸çªç ´ (Chapters 101-200)
+ **ä¸»é¢˜**ï¼šæ‰¿æ‹…è´£ä»»ï¼Œå®ˆæŠ¤ä¸–ç•Œ
+ 
+ #### ç¬¬å››é˜¶æ®µï¼šæ·±å…¥ (Ch 101-150)
+ - è°ƒæŸ¥æš—å½±ç»„ç»‡
+ - èƒ½åŠ›çªç ´ï¼Œè¾¾åˆ°æ›´é«˜å±‚æ¬¡
+ - æ›´å¤šçœŸç›¸æ­éœ²
+ - é¢å¯¹å†…å¿ƒæŒ£æ‰ä¸é€‰æ‹©
+ - **å…³é”®äº‹ä»¶**ï¼šèƒ½åŠ›çªç ´ï¼ˆCh 120ï¼‰ã€é‡å¤§å‘ç°ï¼ˆCh 135ï¼‰
+ 
+ #### ç¬¬äº”é˜¶æ®µï¼šå†³æˆ˜ (Ch 151-200)
+ - æš—å½±ç»„ç»‡çš„ç»ˆæè®¡åˆ’
+ - é›†ç»“æ‰€æœ‰åŠ›é‡
+ - æœ€ç»ˆå¤§æˆ˜
+ - ç‰ºç‰²ä¸èƒœåˆ©
+ - æ–°çš„å¹³è¡¡å»ºç«‹
+ - **å…³é”®äº‹ä»¶**ï¼šçœŸç›¸å¤§ç™½ï¼ˆCh 165ï¼‰ã€æœ€ç»ˆå†³æˆ˜ï¼ˆCh 180-195ï¼‰ã€å°¾å£°ï¼ˆCh 196-200ï¼‰
+ 
+ ## æ ¸å¿ƒäººç‰©å¼§å…‰
+ 
+ ### ä¸»è§’ï¼šå¼ ä¸‰
+ - **èµ·ç‚¹**ï¼šæ™®é€šé«˜ä¸­ç”Ÿï¼Œå–„è‰¯ä½†ç¼ºä¹è‡ªä¿¡
+ - **è½¬æŠ˜**ï¼šèƒ½åŠ›è§‰é†’ã€å¯¼å¸ˆç‰ºç‰²ã€é‡å¤§é€‰æ‹©
+ - **ç»ˆç‚¹**ï¼šæˆç†Ÿçš„å®ˆæŠ¤è€…ï¼Œæ‰¿æ‹…èµ·ä¼ æ‰¿ä½¿å‘½
+ - **å†…åœ¨æˆé•¿**ï¼šä»è¢«åŠ¨æ¥å—â†’ä¸»åŠ¨æ¢ç´¢â†’æ‰¿æ‹…è´£ä»»â†’è¶…è¶Šè‡ªæˆ‘
+ 
+ ### å¯¼å¸ˆï¼šæå››
+ - å‰æœŸé‡è¦å¼•å¯¼è§’è‰²
+ - Ch 58 ç‰ºç‰²ï¼Œæˆä¸ºä¸»è§’æˆé•¿çš„å‚¬åŒ–å‰‚
+ - é—ç•™çš„ç§˜å¯†åœ¨åæœŸé€æ­¥æ­ç¤º
+ - è±¡å¾ä¼ æ‰¿ä¸ç‰ºç‰²ä¸»é¢˜
+ 
+ ### ä¼™ä¼´å›¢é˜Ÿ
+ - **èµµå…­**ï¼šæŠ€æœ¯æ”¯æ´ï¼Œä»£è¡¨æ™ºæ…§ä¸ç­–ç•¥
+ - **å­™ä¸ƒ**ï¼šæˆ˜æ–—ä¸»åŠ›ï¼Œä»£è¡¨å‹‡æ°”ä¸åŠ›é‡
+ - **å‘¨å…«**ï¼šæ²»ç–—æ”¯æŒï¼Œä»£è¡¨å…³æ€€ä¸å¹³è¡¡
+ - å›¢é˜Ÿæˆé•¿ä¸ä¸ªäººæˆé•¿ç›¸è¾…ç›¸æˆ
+ 
+ ### åæ´¾ï¼šæš—å½±ç»„ç»‡
+ - é¦–é¢†èº«ä»½çš„å¤šé‡åè½¬
+ - åŠ¨æœºçš„å¤æ‚æ€§ï¼ˆéçº¯ç²¹é‚ªæ¶ï¼‰
+ - æœ€ç»ˆæ­ç¤ºå…¶ä¸å¤è€å†å²çš„è”ç³»
+ - ä»£è¡¨å¤±è¡¡ä¸æç«¯
+ 
+ ## ä¸»è¦ä¸»é¢˜
+ 
+ 1. **æˆé•¿ä¸è´£ä»»**
+    - èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§
+    - ä»è‡ªæˆ‘åˆ°ä»–äººï¼Œä»ä¸ªä½“åˆ°é›†ä½“
+ 
+ 2. **ç‰ºç‰²ä¸ä¼ æ‰¿**
+    - æ¯ä¸€ä»£å®ˆæŠ¤è€…çš„ä½¿å‘½
+    - å¯¼å¸ˆçš„ç‰ºç‰²æ¢æ¥æ–°ç”Ÿä»£çš„æˆé•¿
+ 
+ 3. **å¹³è¡¡ä¸é€‰æ‹©**
+    - åŠ›é‡çš„ä½¿ç”¨éœ€è¦æ™ºæ…§
+    - å…³é”®æ—¶åˆ»çš„é“å¾·æŠ‰æ‹©
+ 
+ 4. **å›¢é˜Ÿä¸ä¸ªäºº**
+    - æ— æ³•ç‹¬è‡ªå®Œæˆçš„ä½¿å‘½
+    - ä¿¡ä»»ä¸åä½œçš„åŠ›é‡
+ 
+ ## ä¸–ç•Œè§‚è®¾å®š
+ 
+ ### èƒ½åŠ›ä½“ç³»
+ - **ç­‰çº§**ï¼šè§‰é†’â†’ä¿®ä¹ â†’ç²¾é€šâ†’è¶…è¶Šâ†’ä¼ è¯´
+ - **ç±»å‹**ï¼šå…ƒç´ æ“æ§ã€ç‰©ç†å¢å¼ºã€ç²¾ç¥æ„ŸçŸ¥ã€æ—¶ç©ºå¼‚èƒ½
+ - **æ¥æº**ï¼šå¤è€æ–‡æ˜çš„é—ç•™åŠ›é‡
+ 
+ ### ç»„ç»‡æ¶æ„
+ - **å®ˆæŠ¤è€…è”ç›Ÿ**ï¼šç»´æŠ¤å¹³è¡¡çš„æ­£é¢ç»„ç»‡
+ - **æš—å½±ç»„ç»‡**ï¼šè¿½æ±‚æç«¯åŠ›é‡çš„å¯¹ç«‹é¢
+ - **ä¸­ç«‹åŠ¿åŠ›**ï¼šè§‚å¯Ÿè€…ã€ä»²è£è€…
+ 
+ ### éšè—ä¸–ç•Œè§„åˆ™
+ - ä¸å¹²æ¶‰æ™®é€šä¸–ç•Œçš„åŸåˆ™
+ - èƒ½åŠ›è€…é—´çš„åˆ¶è¡¡æœºåˆ¶
+ - å¤è€å¥‘çº¦ä¸é™åˆ¶
+ 
+ ## å…³é”®è½¬æŠ˜ç‚¹
+ 
+ 1. **Ch 3**: é—è¿¹è§‰é†’ - æ•…äº‹å¼€ç«¯
+ 2. **Ch 25**: éƒ¨åˆ†çœŸç›¸ - ä¸–ç•Œè§‚æ‰©å±•
+ 3. **Ch 58**: å¯¼å¸ˆç‰ºç‰² - æƒ…æ„Ÿé«˜æ½®
+ 4. **Ch 92**: åˆæˆ˜å‘Šæ· - ç¬¬ä¸€éƒ¨ç»ˆç»“
+ 5. **Ch 120**: èƒ½åŠ›çªç ´ - åŠ›é‡è·¨è¶Š
+ 6. **Ch 135**: é‡å¤§å‘ç° - å‰§æƒ…è½¬æŠ˜
+ 7. **Ch 165**: çœŸç›¸å¤§ç™½ - æ‰€æœ‰çº¿ç´¢æ±‡èš
+ 8. **Ch 180-195**: æœ€ç»ˆå†³æˆ˜ - å…¨ä¹¦é«˜æ½®
+ 9. **Ch 200**: æ–°çš„å¼€å§‹ - å¼€æ”¾å¼ç»“å±€
+ 
+ ## ä¼ç¬”ä¸å›æ”¶
+ 
+ ### ä¸»è¦ä¼ç¬”
+ - **å¤è€é—è¿¹çš„æ¥å†** (Ch 3) â†’ æ­ç¤ºäº Ch 165
+ - **å¯¼å¸ˆçš„çœŸå®èº«ä»½** (Ch 6) â†’ æ­ç¤ºäº Ch 140
+ - **ä¸»è§’ç‰¹æ®Šèƒ½åŠ›çš„ç‹¬ç‰¹æ€§** (Ch 15) â†’ æ­ç¤ºäº Ch 175
+ - **é¢„è¨€çš„çœŸæ­£å«ä¹‰** (Ch 40) â†’ æ­ç¤ºäº Ch 185
+ 
+ ### æ¬¡è¦ä¼ç¬”
+ - åå¤å‡ºç°çš„ç¥ç§˜ç¬¦å·
+ - æŸäº›è§’è‰²çš„åŒé‡èº«ä»½
+ - å†å²äº‹ä»¶çš„å…³è”æ€§
+ 
+ ## æƒ…èŠ‚èŠ‚å¥åˆ†æ
+ 
+ - **å‰30ç« **ï¼šä¸–ç•Œè§‚å»ºç«‹ï¼ŒèŠ‚å¥å¹³ç¨³
+ - **31-60ç« **ï¼šèƒ½åŠ›å‘å±•ï¼ŒèŠ‚å¥åŠ å¿«
+ - **61-100ç« **ï¼šå†²çªå‡çº§ï¼Œé«˜æ½®ä¸ä½è°·äº¤æ›¿
+ - **101-150ç« **ï¼šæ·±å…¥è°ƒæŸ¥ï¼Œæ‚¬å¿µé€’è¿›
+ - **151-195ç« **ï¼šæ¿€çƒˆå†²çªï¼Œå¤šé‡é«˜æ½®
+ - **196-200ç« **ï¼šæ”¶å°¾ä¸å±•æœ›
+ 
+ ## å†™ä½œç‰¹è‰²
+ 
+ - **å™äº‹è§†è§’**ï¼šç¬¬ä¸‰äººç§°å…¨çŸ¥ï¼Œä¸»è¦è·Ÿéšä¸»è§’
+ - **æƒ…æ„ŸåŸºè°ƒ**ï¼šçƒ­è¡€ã€åŠ±å¿—ã€ç•¥å¸¦æ‚²å£®
+ - **æˆ˜æ–—æå†™**ï¼šè¯¦ç»†çš„èƒ½åŠ›å¯¹æŠ—ï¼Œç­–ç•¥ä¸åŠ›é‡ç»“åˆ
+ - **äººç‰©åˆ»ç”»**ï¼šæ³¨é‡å†…å¿ƒæˆé•¿å’Œå…³ç³»å‘å±•
+ 
+ ## é€‚åˆè¯»è€…ç¾¤
+ 
+ - å–œæ¬¢æˆé•¿ç±»æ•…äº‹çš„è¯»è€…
+ - è¶…èƒ½åŠ›/éƒ½å¸‚å¼‚èƒ½çˆ±å¥½è€…
+ - çƒ­è¡€å†’é™©é¢˜æç²‰ä¸
+ - å¹´é¾„æ®µï¼š15-35å²
+ 
+ ## æ½œåœ¨ç»­ä½œæ–¹å‘
+ 
+ - æ–°ä¸€ä»£å®ˆæŠ¤è€…çš„æ•…äº‹
+ - å…¶ä»–åœ°åŒºçš„èƒ½åŠ›è€…ä¸–ç•Œ
+ - å¤è€æ–‡æ˜çš„æ·±å±‚æ¢ç´¢
+ - ä¸»è§’å›¢é˜Ÿçš„åç»­ä»»åŠ¡
+ 
+ ---
+ 
+ ## æ€»ç»“è¯„ä»·
+ 
+ è¿™æ˜¯ä¸€éƒ¨ç»å…¸çš„æˆé•¿å†’é™©å°è¯´ï¼Œé€šè¿‡200ç« çš„ç¯‡å¹…å®Œæ•´åœ°å‘ˆç°äº†ä¸€ä¸ªå°‘å¹´ä»æ™®é€šäººåˆ°å®ˆæŠ¤è€…çš„èœ•å˜ã€‚
+ æ•…äº‹ç»“æ„å®Œæ•´ï¼ŒèŠ‚å¥æŠŠæ§å¾—å½“ï¼Œäººç‰©å¡‘é€ é¥±æ»¡ï¼Œä¸»é¢˜è¡¨è¾¾æ˜ç¡®ã€‚å‰100ç« ä¾§é‡ä¸ªäººæˆé•¿å’Œèƒ½åŠ›å»ºç«‹ï¼Œ
+ å100ç« å‡ååˆ°è´£ä»»æ‰¿æ‹…å’Œä¸–ç•Œå®ˆæŠ¤ï¼Œå±‚å±‚é€’è¿›ï¼Œé€»è¾‘ä¸¥å¯†ã€‚
+ 
+ **ä¼˜åŠ¿**ï¼š
+ - å®Œæ•´çš„ä¸–ç•Œè§‚å’Œèƒ½åŠ›ä½“ç³»
+ - æ¸…æ™°çš„è§’è‰²æˆé•¿çº¿
+ - ä¸»é¢˜æ˜ç¡®ä¸”æœ‰æ·±åº¦
+ - ä¼ç¬”ä¸å›æ”¶å¤„ç†å¾—å½“
+ 
+ **å¯ä¼˜åŒ–ä¹‹å¤„**ï¼š
+ - éƒ¨åˆ†è¿‡æ¸¡ç« èŠ‚å¯èƒ½ç•¥æ˜¾å¹³æ·¡
+ - æŸäº›æ¬¡è¦è§’è‰²å¯ä»¥æ›´ä¸°æ»¡
+ - æœ€ç»ˆå†³æˆ˜çš„ç¯‡å¹…å¯ä»¥é€‚å½“æ‰©å±•
+ 
+ **æ•´ä½“è¯„åˆ†**ï¼š4.2/5.0
+ 
+ ---
+ Source: Complete analysis of all 200 chapters via hierarchical summarization
+ Generated by: recursive-summarizer sub-agent
+ Date: 2025-10-15
+ ```
+ 
+ ## ğŸ’¡ æç¤º
+ 
+ 1. **é¦–æ¬¡ä½¿ç”¨å»ºè®®**ï¼šå…ˆç”¨å°‘é‡æ–‡ä»¶æµ‹è¯•ï¼ˆå¦‚20-30ç« ï¼‰ï¼ŒéªŒè¯è¾“å‡ºè´¨é‡åå†å¤„ç†å…¨éƒ¨
+ 2. **æ–‡ä»¶å‘½å**ï¼šç¡®ä¿æ–‡ä»¶æœ‰åºå‘½åï¼ˆå¦‚ chapter_001.txt è€Œé chapter_1.txtï¼‰
+ 3. **è´¨é‡æ§åˆ¶**ï¼šæ¯å®Œæˆä¸€å±‚åæ£€æŸ¥å‡ ä¸ªæ‘˜è¦ï¼Œç¡®ä¿æ ¼å¼å’Œå†…å®¹ç¬¦åˆé¢„æœŸ
+ 4. **è¿›åº¦ä¿å­˜**ï¼šæ¯å±‚å®Œæˆåçš„æ–‡ä»¶éƒ½ä¼šä¿å­˜ï¼Œå¯ä»¥éšæ—¶ä¸­æ–­å’Œç»§ç»­
+ 
+ ## ğŸ”§ æ•…éšœæ’é™¤
+ 
+ **é—®é¢˜ï¼šSub-agentæ²¡æœ‰è‡ªåŠ¨è¢«è°ƒç”¨**
+ - è§£å†³ï¼šæ˜¾å¼åœ°è¯´"ä½¿ç”¨recursive-summarizer subagent"
+ 
+ **é—®é¢˜ï¼šæ‘˜è¦å¤ªç®€çŸ­/å¤ªè¯¦ç»†**
+ - è§£å†³ï¼šåœ¨æç¤ºè¯ä¸­æ˜ç¡®æŒ‡å®šé•¿åº¦è¦æ±‚ï¼ˆå¦‚"æ¯ä¸ªæ‘˜è¦300-500å­—"ï¼‰
+ 
+ **é—®é¢˜ï¼šå¤„ç†ä¸­æ–­äº†**
+ - è§£å†³ï¼šæ£€æŸ¥å·²ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä»ä¸‹ä¸€æ‰¹æ¬¡ç»§ç»­å¤„ç†
+ 
+ **é—®é¢˜ï¼šæ–‡ä»¶æ‰¾ä¸åˆ°**
+ - è§£å†³ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»
+ 
+ ## ğŸ“– æ›´å¤šä¿¡æ¯
+ 
+ è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š
+ - å®Œæ•´æŒ‡å—ï¼š`docs/build-with-claude-code/examples/recursive-summarization-guide.md`
+ - Sub-agentæ–‡æ¡£ï¼š`docs/build-with-claude-code/sub-agents.md`
+ 
```

</details>

---

<think><details><summary>Thought Process</summary>å®Œç¾ï¼ç°åœ¨è®©æˆ‘ä¸ºç”¨æˆ·åšä¸€ä¸ªæ¸…æ™°çš„æ€»ç»“ï¼Œè¯´æ˜æ‰€æœ‰åˆ›å»ºçš„æ–‡ä»¶å’Œå¦‚ä½•ä½¿ç”¨ã€‚</details></think>

---

å®Œæˆäº†ï¼æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†å®Œæ•´çš„é€’å½’åˆ†å±‚æ€»ç»“è§£å†³æ–¹æ¡ˆã€‚è®©æˆ‘ä¸ºä½ æ€»ç»“ä¸€ä¸‹ï¼š

## ğŸ“¦ å·²åˆ›å»ºçš„èµ„æº

### 1. **Sub-Agenté…ç½®æ–‡ä»¶**ï¼ˆå·²å®‰è£…åˆ°é¡¹ç›®ï¼‰
- ğŸ“ ä½ç½®ï¼š`.claude/agents/recursive-summarizer.md`
- âœ… çŠ¶æ€ï¼šå·²å°±ç»ªï¼Œå¯ç›´æ¥ä½¿ç”¨
- ğŸ¯ åŠŸèƒ½ï¼šä¸“é—¨ç”¨äºé€’å½’åˆ†å±‚æ€»ç»“å¤§é‡æ–‡æœ¬æ–‡ä»¶

### 2. **å®Œæ•´ä½¿ç”¨æŒ‡å—**ï¼ˆä¸­æ–‡ï¼‰
- ğŸ“ ä½ç½®ï¼š`docs/build-with-claude-code/examples/EXAMPLE-USAGE.md`
- ğŸ“ å†…å®¹ï¼š
  - å¿«é€Ÿå¼€å§‹æ­¥éª¤
  - 3ç§ä½¿ç”¨æ–¹æ³•
  - å®Œæ•´çš„æ‘˜è¦ç¤ºä¾‹ï¼ˆç¬¬ä¸€å±‚ã€ç¬¬äºŒå±‚ã€ç¬¬ä¸‰å±‚ã€æœ€ç»ˆå¤§çº²ï¼‰
  - æ•…éšœæ’é™¤æŒ‡å—

### 3. **è¯¦ç»†æ•™ç¨‹**ï¼ˆä¸­è‹±åŒè¯­ï¼‰
- ğŸ“ ä½ç½®ï¼š`docs/build-with-claude-code/examples/recursive-summarization-guide.md`
- ğŸ“ å†…å®¹ï¼š
  - å±‚çº§ç»“æ„è¯¦è§£
  - è‡ªå®šä¹‰é…ç½®æ–¹æ³•
  - è¿›é˜¶æŠ€å·§
  - å¸¸è§é—®é¢˜è§£ç­”

### 4. **Pythonè¾…åŠ©è„šæœ¬**
- ğŸ“ ä½ç½®ï¼š`docs/build-with-claude-code/examples/scripts/prepare-recursive-summary.py`
- ğŸ“ åŠŸèƒ½ï¼š
  - è‡ªåŠ¨è®¡ç®—å±‚çº§ç»“æ„
  - åˆ›å»ºç›®å½•
  - ç”ŸæˆClaudeæç¤ºè¯

### 5. **æŠ€æœ¯æ–‡æ¡£**
- ğŸ“ ä½ç½®ï¼š`docs/build-with-claude-code/examples/recursive-summarizer-agent.md`
- ğŸ“ å†…å®¹ï¼šSub-agentçš„è¯¦ç»†æŠ€æœ¯è¯´æ˜å’Œæœ€ä½³å®è·µ

## ğŸš€ å¦‚ä½•ä½¿ç”¨ï¼ˆ3æ­¥å¼€å§‹ï¼‰

### å¿«é€Ÿå¼€å§‹

å‡è®¾ä½ çš„200ä¸ªç« èŠ‚æ–‡ä»¶åœ¨ `D:\novels\my-novel\chapters\` ç›®å½•ï¼š

**æ­¥éª¤1**ï¼šç¡®è®¤sub-agentå·²å®‰è£…ï¼ˆå·²å®Œæˆâœ…ï¼‰

**æ­¥éª¤2**ï¼šåœ¨Claude Codeä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```
ä½¿ç”¨ recursive-summarizer subagent å¤„ç†æˆ‘çš„å°è¯´ç« èŠ‚ï¼š

æºç›®å½•ï¼šD:/novels/my-novel/chapters/ (200ä¸ªtxtæ–‡ä»¶)
è¾“å‡ºç›®å½•ï¼šD:/novels/my-novel/summaries/

ç¬¬ä¸€å±‚ï¼šæ¯10ç« æ€»ç»“ä¸€æ¬¡
- è¯»å– chapter_001.txt åˆ° chapter_010.txt â†’ ç”Ÿæˆ summaries/section_summary01/summary_01.txt
- è¯»å– chapter_011.txt åˆ° chapter_020.txt â†’ ç”Ÿæˆ summaries/section_summary01/summary_02.txt
- ...ç»§ç»­å¤„ç†
- æœ€ç»ˆç”Ÿæˆ20ä¸ªæ‘˜è¦æ–‡ä»¶

ç¬¬äºŒå±‚ï¼šæ¯10ä¸ªæ‘˜è¦æ€»ç»“ä¸€æ¬¡
- è¯»å– section_summary01/summary_01.txt åˆ° summary_10.txt â†’ ç”Ÿæˆ section_summary02/summary_01.txt
- è¯»å– section_summary01/summary_11.txt åˆ° summary_20.txt â†’ ç”Ÿæˆ section_summary02/summary_02.txt
- æœ€ç»ˆç”Ÿæˆ2ä¸ªæ‘˜è¦æ–‡ä»¶

ç¬¬ä¸‰å±‚ï¼šæœ€ç»ˆæ€»ç»“
- è¯»å– section_summary02/ çš„2ä¸ªæ–‡ä»¶ â†’ ç”Ÿæˆ section_summary03/final_outline.txt

è¯·é€å±‚å¤„ç†ï¼Œæ¯å±‚å®ŒæˆåæŠ¥å‘Šè¿›åº¦ã€‚
```

**æ­¥éª¤3**ï¼šç­‰å¾…å¤„ç†å®Œæˆï¼ŒæŸ¥çœ‹ç”Ÿæˆçš„æ‘˜è¦æ–‡ä»¶

## ğŸ“Š é¢„æœŸç»“æœ

å¤„ç†å®Œæˆåï¼Œä½ ä¼šå¾—åˆ°ï¼š

```
D:/novels/my-novel/summaries/
â”œâ”€â”€ section_summary01/       # 20ä¸ªæ–‡ä»¶ï¼ˆæ¯ä¸ªæ€»ç»“10ç« ï¼‰
â”œâ”€â”€ section_summary02/       # 2ä¸ªæ–‡ä»¶ï¼ˆæ¯ä¸ªæ€»ç»“10ä¸ªç¬¬ä¸€å±‚æ‘˜è¦ï¼‰
â””â”€â”€ section_summary03/       # 1ä¸ªæ–‡ä»¶ï¼ˆæœ€ç»ˆå¤§çº²ï¼‰
    â””â”€â”€ final_outline.txt    # å®Œæ•´çš„å°è¯´å¤§çº²
```

æ¯ä¸ªæ‘˜è¦æ–‡ä»¶éƒ½åŒ…å«ï¼š
- ç« èŠ‚èŒƒå›´
- ä¸»è¦æƒ…èŠ‚
- è§’è‰²å‘å±•
- ä¸»é¢˜å…ƒç´ 
- ä¸å‰åçš„è¿æ¥

## ğŸ“š æŸ¥çœ‹è¯¦ç»†ç¤ºä¾‹

æƒ³çœ‹å…·ä½“çš„æ‘˜è¦å†…å®¹é•¿ä»€ä¹ˆæ ·ï¼Ÿè¯·æŸ¥çœ‹ï¼š
`docs/build-with-claude-code/examples/EXAMPLE-USAGE.md`

æ–‡ä»¶ä¸­åŒ…å«äº†ï¼š
- ç¬¬ä¸€å±‚æ‘˜è¦çš„å®Œæ•´ç¤ºä¾‹ï¼ˆçº¦500å­—ï¼‰
- ç¬¬äºŒå±‚æ‘˜è¦çš„å®Œæ•´ç¤ºä¾‹ï¼ˆçº¦800å­—ï¼‰
- ç¬¬ä¸‰å±‚æœ€ç»ˆå¤§çº²çš„å®Œæ•´ç¤ºä¾‹ï¼ˆçº¦2000å­—ï¼‰

## ğŸ’¡ å…³é”®ç‰¹æ€§

1. **è‡ªåŠ¨é€’å½’**ï¼šSub-agentä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰å±‚çº§ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
2. **è¿›åº¦æŠ¥å‘Š**ï¼šæ¯å®Œæˆä¸€æ‰¹æ¬¡éƒ½ä¼šæŠ¥å‘Šè¿›åº¦
3. **æ ¼å¼ä¸€è‡´**ï¼šæ‰€æœ‰æ‘˜è¦ä½¿ç”¨ç»Ÿä¸€çš„æ ¼å¼
4. **å¯è¿½æº¯**ï¼šæ¯ä¸ªæ‘˜è¦éƒ½æ ‡æ³¨äº†æºæ–‡ä»¶
5. **è´¨é‡ä¿è¯**ï¼šä¿ç•™å…³é”®ä¿¡æ¯å’Œå™äº‹è¿è´¯æ€§

## ğŸ¯ ä½ éœ€è¦åšä»€ä¹ˆ

1. âœ… **å‡†å¤‡æºæ–‡ä»¶**ï¼šç¡®ä¿200ä¸ªç« èŠ‚æ–‡ä»¶éƒ½åœ¨ä¸€ä¸ªç›®å½•ä¸­
2. âœ… **æ–‡ä»¶å‘½å**ï¼šå»ºè®®ä½¿ç”¨ `chapter_001.txt` åˆ° `chapter_200.txt` è¿™æ ·çš„å‘½å
3. âœ… **å¤åˆ¶æç¤ºè¯**ï¼šä» `EXAMPLE-USAGE.md` å¤åˆ¶æç¤ºè¯ï¼Œä¿®æ”¹è·¯å¾„
4. âœ… **åœ¨Claude Codeä¸­æ‰§è¡Œ**ï¼šç²˜è´´æç¤ºè¯å¹¶è¿è¡Œ

å°±è¿™ä¹ˆç®€å•ï¼Sub-agentä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰å±‚çº§çš„å¤„ç†ã€‚

éœ€è¦æˆ‘å¸®ä½ æµ‹è¯•ä¸€ä¸‹å—ï¼Ÿæˆ–è€…ä½ æœ‰ä»»ä½•é—®é¢˜å—ï¼Ÿ

---

